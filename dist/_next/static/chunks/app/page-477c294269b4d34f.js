(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{414:(e,t,r)=>{"use strict";function a(e){return e&&"object"==typeof e?e.Product_ID&&"number"==typeof e.Product_ID?{...e,Product_Name:e.Product_Name||"Неизвестный товар",images:Array.isArray(e.images)?e.images:[],categories:Array.isArray(e.categories)?e.categories:[],marks:Array.isArray(e.marks)?e.marks:[],parameters:Array.isArray(e.parameters)?e.parameters:[],colors:Array.isArray(e.colors)?e.colors.map(t=>({Color_ID:(null==t?void 0:t.Color_ID)||0,Color_Name:(null==t?void 0:t.Color_Name)||"",Color_Code:(null==t?void 0:t.Color_Code)||"",Color_image:(null==t?void 0:t.Color_image)||null,Product_ID:(null==t?void 0:t.Product_ID)||e.Product_ID||0,discount:(null==t?void 0:t.discount)||null})):[],extras:Array.isArray(e.extras)?e.extras:[],reviews:Array.isArray(e.reviews)?e.reviews:[],reviews_video:Array.isArray(e.reviews_video)?e.reviews_video:[]}:(console.error("Продукт без валидного ID:",e),null):(console.error("Невалидные данные продукта:",e),null)}r.d(t,{OJ:()=>s});let s={categories:[],product_marks:[],overall_product_tags_by_category:{},products:[]}},1360:()=>{},1804:()=>{},2022:()=>{},2124:()=>{},4459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ei});var a=r(5155),s=r(2115),i=r(925);r(7576);var l=r(5695);let o="https://static-sda.ru/front_end/icons/";var n=r(9543);let c=r(3464).A.create({baseURL:"".concat(window.location.origin,"/api")});c.interceptors.request.use(e=>e,e=>{console.debug(e)}),c.interceptors.response.use(e=>e,async e=>{var t;let r=e.config;(null==(t=e.response)?void 0:t.status)!==401||r._retry||(r._retry=!0),console.debug(e)});var d=r(2471);class p{setupAutoRefresh(e){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=window.setInterval(()=>{this.fetchProducts()},e)}async refreshData(){return this.fetchProducts()}async fetchProducts(){this.error=null;try{let e=await c.get("/products");return(0,n.h5)(()=>{this.data=e.data,this.lastUpdated=Date.now(),window.dispatchEvent(new Event("storeDataUpdated"))}),!0}catch(e){return(0,n.h5)(()=>{this.error=e instanceof Error?e.message:"Неизвестная ошибка"}),!1}}constructor(){this.data={},this.error=null,this.lastUpdated=0,this.refreshInterval=null,(0,n.l_)(this),(0,d.pu)(this,{name:"DataStore",properties:["data","lastUpdated"],storage:window.localStorage}),this.fetchProducts(),this.setupAutoRefresh(3e5)}}let u=new p;r(8548);let m=()=>{let e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)},h=()=>{var e,t,r,n;(0,l.usePathname)();let c=(0,i.zy)(),[d,p]=(0,s.useState)({}),[h,g]=(0,s.useState)(null),v=(0,s.useRef)(null),f=(0,s.useRef)(null);function x(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}return(0,s.useRef)(null),(0,s.useEffect)(()=>{let e=window.Telegram.WebApp;return e?(g(e),e.expand(),e.ready(),e.version>="7.9"&&(x()&&e.requestFullscreen(),e.disableVerticalSwipes(),e.setHeaderColor("#f1f1f1"),e.setBottomBarColor("#f1f1f1"),e.setBackgroundColor("#f1f1f1"),"/"===c.pathname?e.BackButton.hide():(e.BackButton.show(),e.BackButton.onClick(()=>{window.history.back()}))),e.initDataUnsafe&&e.initDataUnsafe.user&&p(e.initDataUnsafe.user),window.addEventListener("pageshow",e=>{e.persisted&&window.location.reload()})):console.warn("Telegram WebApp не доступен. Запуск вне Mini App."),()=>{window.removeEventListener("pageshow",()=>{})}},[c]),(0,a.jsxs)("header",{className:"header \n    ".concat(!x()?"header-mobile":"","\n    ").concat(m()?"header-ios":""),children:[(0,a.jsxs)("div",{className:"header-profile",children:[(0,a.jsx)("img",{ref:v,className:"header-profile-image",src:d.photo_url,alt:"",id:"header-avatar-image"}),(0,a.jsxs)("p",{ref:f,className:"header-profile-text",id:"header-username-text",children:[d.first_name?(e=>e?e.charAt(0).toLocaleUpperCase()+e.slice(1).toLocaleLowerCase():"")(d.first_name):"Вы"," ",d.last_name||""]})]}),(0,a.jsxs)("a",{href:null==(t=u.data)||null==(e=t.special_project_parameters)?void 0:e.telegram_header_link_value,target:"_blank",className:"header-telegram",children:[(0,a.jsx)("img",{src:"".concat(o,"telegram-icon.svg"),alt:""}),(0,a.jsx)("p",{className:"header-telegram-text index-telegram-open-special_tg",children:null==(n=u.data)||null==(r=n.special_project_parameters)?void 0:r.telegram_bot_username_value})]})]})};var g=r(3438);class v{addToCart(e,t){let r="object"==typeof t&&null!==t,a=r?t.paramTitle:t,s=r?t.colorId:null,i=r?t.colorImage:null,l=this.items.find(t=>{var r,i;let l=t.Product_ID===e&&(!a||(null==(r=t.parameters)?void 0:r.parameter_string)===a),o=!s||(null==(i=t.selectedColor)?void 0:i.id)===s;return l&&o});if(l)return void this.increaseQuantity(l.Product_ID,a,s);if(!u.data||!u.data.products)return;let o=u.data.products.find(t=>t.Product_ID===e);if(!o)return;let c=null;a&&o.parameters&&Array.isArray(o.parameters)&&((c=o.parameters.find(e=>e.parameter_string===a))||!(o.parameters.length>0)||(c=o.parameters[0]));let d=null;s&&o.colors&&Array.isArray(o.colors)&&((d=o.colors.find(e=>e.Color_ID===s))||!r||!t.colorName||(d={Color_ID:s,Color_Name:t.colorName,Color_Code:t.colorCode||"",Color_image:i,Product_ID:e,discount:t.discount||0}));let p=(null==c?void 0:c.price)||o.Price||0;d&&d.discount&&(p=Math.max(0,p-d.discount));let m={...o,parameters:c,selectedColor:d?{id:d.Color_ID,name:d.Color_Name,code:d.Color_Code,image:d.Color_image||i,discount:d.discount}:null,final_price:p,quantity:1};(0,n.h5)(()=>{this.items=[...this.items,m]})}removeFromCart(e,t,r){(0,n.h5)(()=>{this.items=this.items.filter(a=>{var s,i;let l=!(a.Product_ID===e&&(!t||(null==(s=a.parameters)?void 0:s.parameter_string)===t)),o=!r||(null==(i=a.selectedColor)?void 0:i.id)!==r;return l||o})})}clearCart(){(0,n.h5)(()=>{this.items=[]}),localStorage.removeItem("addedSettingItems")}increaseQuantity(e,t,r){let a=[...this.items],s=a.findIndex(a=>{var s,i;let l=a.Product_ID===e&&(!t||(null==(s=a.parameters)?void 0:s.parameter_string)===t),o=!r||(null==(i=a.selectedColor)?void 0:i.id)===r;return l&&o});-1!==s&&(a[s]={...a[s],quantity:(a[s].quantity||1)+1},(0,n.h5)(()=>{this.items=a}))}decreaseQuantity(e,t,r){let a=[...this.items],s=a.findIndex(a=>{var s,i;let l=a.Product_ID===e&&(!t||(null==(s=a.parameters)?void 0:s.parameter_string)===t),o=!r||(null==(i=a.selectedColor)?void 0:i.id)===r;return l&&o});-1!==s&&a[s].quantity>1&&(a[s]={...a[s],quantity:a[s].quantity-1},(0,n.h5)(()=>{this.items=a}))}constructor(){this.items=[],(0,n.l_)(this),(0,d.pu)(this,{name:"ShoppingCartStore",properties:["items"],storage:window.localStorage})}}let f=new v;r(8358);let x=(0,g.PA)(()=>{let e=(0,i.zy)(),[t,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)([{id:1,icon:'<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M7.34655 18.9553H3.98376C2.74494 18.9553 1.74121 17.9516 1.74121 16.7127V10.1159C1.74197 9.63537 1.84541 9.1605 2.0446 8.72315C2.2438 8.2858 2.53415 7.89606 2.89621 7.58005L8.95742 2.30077C9.36557 1.94571 9.88831 1.75015 10.4293 1.75015C10.9703 1.75015 11.493 1.94571 11.9011 2.30077L17.9624 7.58107C18.3243 7.89697 18.6146 8.28654 18.8138 8.72371C19.0129 9.16087 19.1165 9.63554 19.1174 10.1159V16.7127C19.1174 17.3073 18.8812 17.8776 18.4609 18.2981C18.0406 18.7186 17.4704 18.955 16.8758 18.9553H13.7921V12.2287C13.7921 11.3006 13.0398 10.5473 12.1107 10.5473H9.02897C8.09986 10.5473 7.34757 11.3006 7.34757 12.2287L7.34655 18.9553ZM7.34655 18.9553H13.7931" stroke="#8B8B8B" strokeWidth="1.3" strokeLinejoin="round"/>\n</svg>',href:"/",isActive:!1},{id:2,icon:'<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M4.375 8.75H6.125C7.875 8.75 8.75 7.875 8.75 6.125V4.375C8.75 2.625 7.875 1.75 6.125 1.75H4.375C2.625 1.75 1.75 2.625 1.75 4.375V6.125C1.75 7.875 2.625 8.75 4.375 8.75Z" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n<path d="M14.875 8.75H16.625C18.375 8.75 19.25 7.875 19.25 6.125V4.375C19.25 2.625 18.375 1.75 16.625 1.75H14.875C13.125 1.75 12.25 2.625 12.25 4.375V6.125C12.25 7.875 13.125 8.75 14.875 8.75Z" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n<path d="M14.875 19.25H16.625C18.375 19.25 19.25 18.375 19.25 16.625V14.875C19.25 13.125 18.375 12.25 16.625 12.25H14.875C13.125 12.25 12.25 13.125 12.25 14.875V16.625C12.25 18.375 13.125 19.25 14.875 19.25Z" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n<path d="M4.375 19.25H6.125C7.875 19.25 8.75 18.375 8.75 16.625V14.875C8.75 13.125 7.875 12.25 6.125 12.25H4.375C2.625 12.25 1.75 13.125 1.75 14.875V16.625C1.75 18.375 2.625 19.25 4.375 19.25Z" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n</svg>',href:"/catalog",isActive:!1},{id:4,icon:'<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.0425 18.2088C10.745 18.3138 10.255 18.3138 9.9575 18.2088C7.42 17.3426 1.75 13.7288 1.75 7.60384C1.75 4.90009 3.92875 2.71259 6.615 2.71259C8.2075 2.71259 9.61625 3.48259 10.5 4.67259C11.3837 3.48259 12.8013 2.71259 14.385 2.71259C17.0713 2.71259 19.25 4.90009 19.25 7.60384C19.25 13.7288 13.58 17.3426 11.0425 18.2088Z" stroke="#8B8B8B" strokeWidth="1.3" strokeLinecap="round" strokeLinejoin="round"/>\n</svg>',href:"/favorites",isActive:!1},{id:5,icon:'<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M7.70913 1.75L4.54163 4.92625" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n<path d="M13.2916 1.75L16.4591 4.92625" stroke="#8B8B8B" strokeWidth="1.3" strokeMiterlimit="10" strokeLinecap="round" strokeLinejoin="round"/>\n<path d="M1.75 6.86816C1.75 5.24941 2.61625 5.11816 3.6925 5.11816H17.3075C18.3838 5.11816 19.25 5.24941 19.25 6.86816C19.25 8.74941 18.3838 8.61816 17.3075 8.61816H3.6925C2.61625 8.61816 1.75 8.74941 1.75 6.86816Z" stroke="#8B8B8B" strokeWidth="1.3"/>\n<path d="M8.54004 12.25V15.3562" stroke="#8B8B8B" strokeWidth="1.3" strokeLinecap="round"/>\n<path d="M12.5653 12.25V15.3562" stroke="#8B8B8B" strokeWidth="1.3" strokeLinecap="round"/>\n<path d="M3.0625 8.75L4.29625 16.31C4.57625 18.0075 5.25 19.25 7.7525 19.25H13.0288C15.75 19.25 16.1525 18.06 16.4675 16.415L17.9375 8.75" stroke="#8B8B8B" strokeWidth="1.3" strokeLinecap="round"/>\n</svg>',href:"/shoppingcart",isActive:!1}]),n=(0,s.useMemo)(()=>[...f.items].reduce((e,t)=>e+(t.quantity||1),0),[f.items]);return(0,s.useEffect)(()=>{o(l.map(t=>t.href===e.pathname?{...t,isActive:!0}:{...t,isActive:!1}))},[e]),(0,s.useEffect)(()=>{r(m())},[]),(0,a.jsx)("footer",{className:"footer ".concat(t?"footer-ios":""),children:(0,a.jsxs)("nav",{className:"footer-nav",children:[l.map(e=>(0,a.jsx)(i.k2,{to:e.href,className:"footer-nav-link click-effect-block ".concat(e.isActive?"activeLink":""),dangerouslySetInnerHTML:{__html:e.icon}},e.id)),n>0&&(0,a.jsx)("span",{className:"footer-cart-badge".concat(e.pathname.includes("shoppingcart")?" footer-cart-badge--active":""),children:n})]})})}),j=e=>{var t,r,s,l,o,n;let{children:c}=e,d=(0,i.zy)().pathname.includes("/product/");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{}),c,(0,a.jsx)("div",{className:"wrapper-footer \n          ".concat(d?"wrapper-footer-productPage":"","\n          ").concat(m()?"wrapper-footer--ios":"","\n          "),children:(0,a.jsxs)("p",{className:"footer-text",children:[null==(r=u.data)||null==(t=r.special_project_parameters)?void 0:t.project_name_extra_field_1," ",(0,a.jsx)("br",{}),(0,a.jsx)("a",{href:null==(l=u.data)||null==(s=l.special_project_parameters)?void 0:s.footer_link_value,target:"_blank",className:"index-telegram-open-special_tg footer-link",children:null==(n=u.data)||null==(o=n.special_project_parameters)?void 0:o.footer_link_description})]})}),(0,a.jsx)(x,{})]})};var _=r(7269),C=r(7677),N=r(6874),y=r.n(N);class b{toggleFavorite(e){this.favoritesIds.includes(e)?this.favoritesIds=this.favoritesIds.filter(t=>t!==e):this.favoritesIds.push(e)}removeFavorite(e){this.favoritesIds=this.favoritesIds.filter(t=>t!==e)}isFavorite(e){return this.favoritesIds.includes(e)}constructor(){this.favoritesIds=[],(0,n.l_)(this),(0,d.pu)(this,{name:"FavoritesStore",properties:["favoritesIds"],storage:window.localStorage})}}let w=new b,k=JSON.parse('{"O5":{"q":{"_":"Подробнее"}},"ue":{"$":{"q":"Найти товары"}},"Qs":{"U$":{"D":"Каталог"}}}');r(2252),r(6970),r(9408),r(2124);let I=e=>{switch(null==e?void 0:e.toLowerCase()){case"хит":case"hit":return"bg-[#ff6723]";case"new":return"bg-[#45b649]";case"sale":return"bg-[#ffca28]";case"premium":return"bg-[#7561E8]";case"hot":return"bg-[#FF5722]";default:return"bg-[#292928]"}},S=e=>{switch(null==e?void 0:e.toLowerCase()){case"хит":case"hit":return"ХИТ";case"new":return"NEW";case"sale":return"SALE";case"premium":return"PREMIUM";case"hot":return"HOT";default:return e}},T=(0,g.PA)(e=>{let{id:t,tags:r,images:s,initialPrice:l,currentPrice:o,title:n,categoryId:c}=e,d=t&&"number"==typeof t,p=Array.isArray(s)&&s.length>0,u=n&&"string"==typeof n;return d?(0,a.jsxs)(i.k2,{to:"/product/".concat(t),className:"product-card click-effect-block",children:[(0,a.jsxs)("div",{className:"product-card-sliderWrapper",children:[(0,a.jsx)("div",{className:"product-card-sliderWrapper-tags",children:r&&r.length>0&&r.map(e=>""!==e.trim()&&(0,a.jsx)("div",{className:"product-card-sliderWrapper-tag ".concat(I(e)),children:S(e)},e))}),p?(0,a.jsx)(C.RC,{modules:[_.dK],spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},className:"product-card-swiper",style:{width:"100%",height:"100%"},children:s.map(e=>(0,a.jsx)(C.qr,{children:(0,a.jsx)("div",{className:"product-slide-container",children:(0,a.jsx)("img",{className:"product-card-slide-image",src:e.Image_URL?e.Image_URL:"/placeholder-image.jpg",alt:"Изображение товара ".concat(n||"Товар"),onError:e=>{e.currentTarget.src="/placeholder-image.jpg"}})})},e.Image_ID||Math.random()))}):(0,a.jsx)("div",{className:"product-card-no-image",children:(0,a.jsx)("p",{children:"Нет изображения"})}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),w.toggleFavorite(t)},className:"product-card-addToFavoritesButton",children:(0,a.jsx)("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:w.favoritesIds.some(e=>e===t)?"#FE646F":"transparent",xmlns:"http://www.w3.org/2000/svg",className:"cursor-pointer",children:(0,a.jsx)("path",{d:"M9.30663 14.7267L9.30662 14.7267L9.30029 14.7289C9.24983 14.7467 9.14099 14.7668 8.99996 14.7668C8.85893 14.7668 8.75009 14.7467 8.69963 14.7289L8.69964 14.7289L8.69329 14.7267C7.57825 14.346 5.71238 13.3333 4.13388 11.716C2.56322 10.1067 1.31663 7.94228 1.31663 5.24183C1.31663 3.02277 3.10364 1.2335 5.29996 1.2335C6.60123 1.2335 7.75317 1.86153 8.47812 2.8377C8.60075 3.00282 8.79429 3.10016 8.99996 3.10016C9.20563 3.10016 9.39917 3.00282 9.5218 2.8377C10.2464 1.86206 11.4064 1.2335 12.7 1.2335C14.8963 1.2335 16.6833 3.02277 16.6833 5.24183C16.6833 7.94228 15.4367 10.1067 13.866 11.716C12.2875 13.3333 10.4217 14.346 9.30663 14.7267Z",stroke:w.favoritesIds.some(e=>e===t)?"#FE646F":"#6C6C6C",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,a.jsxs)("div",{className:"product-card-priceContainer",children:[(0,a.jsx)("p",{className:"product-card-priceContainer-current product-card-text",children:o&&"string"==typeof o?"".concat(o," ₽"):"Цена по запросу"}),l&&"0"!==l&&l!==o&&(0,a.jsxs)("p",{className:"product-card-priceContainer-initial product-card-text",children:[l," ₽"]})]}),(0,a.jsx)("h4",{className:"product-card-title product-card-text",children:u?n:"Товар без названия"}),(0,a.jsx)("div",{className:"product-card-link-wrapper",children:(0,a.jsx)("p",{className:"product-card-link product-card-text",suppressHydrationWarning:!0,children:k.O5.q._||"Перейти к товару"})})]}):(console.error("Продукт без валидного ID:",t),null)});r(8720),r(4631);let E=function(){return(0,a.jsx)("div",{className:"loading-container",children:(0,a.jsx)("div",{className:"loading-spinner"})})},A=(0,g.PA)(e=>{let{isFavorites:t,categoryFilter:r,tagFilter:i,customTagFilter:o,searchQuery:n="",importanceFilter:c=!1,limit:d,showOnMainOnly:p=!1}=e,m=(0,l.usePathname)()||"",h=(0,s.useRef)(null),g=(0,s.useRef)(null),[v,f]=(0,s.useState)([]),[x,j]=(0,s.useState)([]),[_,C]=(0,s.useState)("pending"),[N,y]=(0,s.useState)(!1),[b,k]=(0,s.useState)(12),[I,S]=(0,s.useState)(!1),[A,L]=(0,s.useState)(!1),[P,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{D(!0)},[]);let M=e=>{if(!e.parameters||!Array.isArray(e.parameters)||0===e.parameters.length)return{initialPrice:"",currentPrice:"0"};let t=e.parameters.find(e=>e.chosen)||e.parameters[0];return t?{initialPrice:t.old_price?String(t.old_price):"",currentPrice:t.price?String(t.price):"0"}:{initialPrice:"",currentPrice:"0"}},O=(e,t)=>t?e.filter(e=>e.categories&&Array.isArray(e.categories)&&e.categories.length>0&&e.categories[0].Category_ID===t):e,F=(e,t)=>t&&0!==t.length?e.filter(e=>{let r=["sale","premium","new","hit","hot"],a=t.filter(e=>r.includes(e)),s=t.filter(e=>!r.includes(e)),i=!0;a.length>0&&(i=a.some(t=>e.marks&&Array.isArray(e.marks)&&e.marks.some(e=>e.Mark_Name&&e.Mark_Name.toLowerCase()===t.toLowerCase())));let l=!0;return(s.length>0&&(l=e.tags&&Array.isArray(e.tags)&&s.some(t=>e.tags.includes(t))),a.length>0&&s.length>0)?i||l:i&&l}):e,B=(e,t)=>{if(!t||""===t.trim())return e;let r=t.toLowerCase().trim().split(/\s+/).filter(e=>e.length>0);return 0===r.length?e:e.filter(e=>{if(!e.Product_Name)return!1;let t=e.Product_Name.toLowerCase(),a="";e.extras&&Array.isArray(e.extras)&&e.extras.length>0&&e.extras[0].Characteristics&&(a=e.extras[0].Characteristics.toLowerCase());let s=t+" "+a;return r.every(e=>s.includes(e))})},R=(e,t)=>{if(!t)return[...e];switch(t){case"Сначала новые":return[...e].sort((e,t)=>e.Created_At&&t.Created_At?new Date(t.Created_At).getTime()-new Date(e.Created_At).getTime():0);case"Сначала старые":return[...e].sort((e,t)=>e.Created_At&&t.Created_At?new Date(e.Created_At).getTime()-new Date(t.Created_At).getTime():0);case"Сначала дешевле":return[...e].sort((e,t)=>{let{currentPrice:r}=M(e),{currentPrice:a}=M(t);return(parseFloat(r)||0)-(parseFloat(a)||0)});case"Сначала дороже":return[...e].sort((e,t)=>{let{currentPrice:r}=M(e),{currentPrice:a}=M(t),s=parseFloat(r)||0;return(parseFloat(a)||0)-s});case"Рекомендуемые":return[...e].sort((e,t)=>null!==e.importance_num&&null!==t.importance_num?(console.log(t),t.importance_num-e.importance_num):null!==e.importance_num?-1:+(null!==t.importance_num));default:return[...e]}},W=(0,s.useCallback)(()=>t?x.filter(e=>w.favoritesIds.includes(e.Product_ID)):x,[t,x,w.favoritesIds]),H=(0,s.useCallback)(e=>p?e.filter(e=>!0===e.OnMain):e,[p]);(0,s.useEffect)(()=>{let e=[...v];p&&(e=H(e)),r&&(e=O(e,r)),i&&(e=R(e,i)),o&&o.length>0&&(e=F(e,o)),n&&(e=B(e,n)),c&&(e=[...e].sort((e,t)=>null!==e.importance_num&&null!==t.importance_num?t.importance_num-e.importance_num:null!==e.importance_num?-1:+(null!==t.importance_num))),j(e)},[v,r,i,o,n,c,p]),(0,s.useEffect)(()=>{if(Object.entries(u.data).length){var e,t;y(!0),f((null==(e=u.data)?void 0:e.products)||[]),j((null==(t=u.data)?void 0:t.products)||[])}else y(!1)},[u.data]),(0,s.useEffect)(()=>{N&&C(W().length>0)},[W,N]),(0,s.useEffect)(()=>{m.includes("shoppingcart")},[m]);let q=(0,s.useCallback)(()=>{I||A||(S(!0),setTimeout(()=>{let e=W();b>=e.length||d&&b>=d?L(!0):k(t=>Math.min(t+12,d||e.length)),S(!1)},300))},[b,I,A,W,d]);return(0,s.useEffect)(()=>{if(!g.current||!P)return;let e=new IntersectionObserver(e=>{!e[0].isIntersecting||I||A||q()},{threshold:.1});return e.observe(g.current),()=>{g.current&&e.unobserve(g.current)}},[q,I,A,P]),(0,s.useEffect)(()=>{k(12),L(!1)},[r,i,o,n,p]),(0,a.jsx)("section",{className:"productsSection",ref:h,children:!1===_?(0,a.jsx)("div",{className:"no-products-message",children:"товар не найден"}):"pending"===_?(0,a.jsx)(E,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"productsSection-grid",children:W().slice(0,d?Math.min(b,d):b).map((e,t)=>{if(!e||!e.Product_ID)return null;let{initialPrice:r,currentPrice:s}=M(e);return(0,a.jsx)(T,{id:e.Product_ID,tags:e.marks&&Array.isArray(e.marks)&&e.marks.length>0?e.marks.map(e=>e.Mark_Name):"",images:Array.isArray(e.images)?e.images:[],initialPrice:r,currentPrice:s,title:e.Product_Name||"",categoryId:e.categories&&Array.isArray(e.categories)&&e.categories.length>0?e.categories[0].Category_ID:0},"".concat(e.Product_ID,"-").concat(t))})}),!A&&!0===_&&W().length>b&&(0,a.jsx)("div",{ref:g,className:"productsSection-loader",children:I&&(0,a.jsx)(E,{})})]})})});r(8274);let L=e=>{let{children:t,height:r,between:i="10px"}=e;return(0,a.jsx)("div",{style:{height:r},className:"slider-container",children:(0,a.jsx)("div",{style:{gap:i},className:"slider-content",children:s.Children.map(t,(e,t)=>(0,a.jsx)("div",{className:"slider-item",children:e},t))})})};function P(){var e,t,r;return{categories:(null==(e=u.data)?void 0:e.categories)||[],overall_product_tags_by_category:(null==(t=u.data)?void 0:t.overall_product_tags_by_category)||{},product_marks:(null==(r=u.data)?void 0:r.product_marks)||[]}}function D(){let[e,t]=(0,s.useState)(P().categories);return(0,s.useEffect)(()=>{t(P().categories);let e=()=>{t(P().categories)};return window.addEventListener("storeDataUpdated",e),()=>{window.removeEventListener("storeDataUpdated",e)}},[]),e}P().categories,P();let M=(0,g.PA)(()=>{let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)("/"),[n,c]=(0,s.useState)("Отзывы"),[d,p]=(0,s.useState)("4,9 • 37 000 оценок");return(0,s.useEffect)(()=>{var e,r,a,s,i,o,n,d;t(!0);let m=(null==(r=u.data)||null==(e=r.special_project_parameters)?void 0:e.reviews_link_value)||(null==(s=u.data)||null==(a=s.special_project_parameters)?void 0:a.main_page_reviews_block_d_value);m&&l(m);let h=null==(o=u.data)||null==(i=o.special_project_parameters)?void 0:i.main_page_reviews_block_d_description;h&&c(h);let g=null==(d=u.data)||null==(n=d.special_project_parameters)?void 0:n.main_page_reviews_block_d_extra_field_1;g&&p(g)},[u.data]),(0,a.jsxs)("main",{"data-page":"index",className:"homeMain ".concat(m()?"homeMain--ios":""),children:[(0,a.jsx)("div",{className:"banner",children:(()=>{var t;if(!e)return(0,a.jsx)("div",{className:"banner-placeholder",style:{width:"100%",height:"150px"},children:(0,a.jsx)(E,{})});let r={modules:[_.dK,_.Ij],spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},className:"product-card-swiper",style:{width:"100%",height:"100%"},simulateTouch:!0,touchRatio:1,resistanceRatio:0,preventInteractionOnTransition:!1,autoplay:{delay:4e3,disableOnInteraction:!0}};return(0,a.jsx)(C.RC,{...r,children:null==(t=u.data.special_project_parameters_actions)?void 0:t.map(e=>(0,a.jsx)(C.qr,{children:(0,a.jsx)("div",{className:"swiper-slide-content",children:(0,a.jsx)("img",{src:e.image_url?e.image_url:void 0,alt:"",className:"bannerImage"})})},e.id))})})()}),(0,a.jsxs)("div",{className:"infoCards",children:[(0,a.jsxs)(y(),{href:r,className:"reviewsCard click-effect-block",children:[(0,a.jsx)("p",{className:"reviewsTitle",children:n}),(0,a.jsx)("div",{className:"ratingContainer",children:(0,a.jsx)("img",{src:"".concat(o,"rating-icon.png"),alt:""})}),(0,a.jsx)("p",{className:"ratingText",children:d})]}),(0,a.jsxs)(i.k2,{to:"/catalog?tag=sale",className:"salesCard click-effect-block",children:[(0,a.jsx)("img",{src:"".concat(o,"sales-icon.svg"),alt:""}),(0,a.jsxs)("p",{className:"salesText",children:["Акции ",(0,a.jsx)("br",{}),"и скидки"]})]})]}),(0,a.jsx)("div",{className:"categoriesContainer",children:(0,a.jsx)(L,{height:"100%",children:D().slice().sort((e,t)=>e.Category_ID-t.Category_ID).map(e=>(0,a.jsxs)(i.k2,{to:"/catalog?category=".concat(e.Category_ID),className:"categoryItem",children:[(0,a.jsx)("img",{src:e.Category_Image?e.Category_Image:void 0,alt:""}),(0,a.jsx)("p",{className:"categoryTitle",children:2===e.Category_ID?"Аксессуары и техника":e.Category_Name})]},e.Category_ID))})}),(0,a.jsx)(A,{isFavorites:!1,importanceFilter:!0,limit:10,showOnMainOnly:!0})]})});r(7123);let O=e=>{let{activeCategory:t,onCategoryChange:r}=e,i=D(),l=(0,s.useRef)(null),o=(0,s.useRef)([]),n=()=>{if(!t||!l.current)return;let e=i.findIndex(e=>e.Category_ID===t);if(-1!==e&&o.current[e]){let t=o.current[e];t&&l.current.querySelector(".slider-container")&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}};(0,s.useEffect)(()=>{t&&i.length>0&&setTimeout(n,300)},[t,i]);let c=e=>{r(e),e!==t&&setTimeout(n,50)};return(0,a.jsx)("div",{className:"categoryFilter",ref:l,children:(0,a.jsx)(L,{height:"38px",children:i.map((e,s)=>(0,a.jsxs)("div",{ref:e=>{o.current[s]=e},className:"categoryFilter-tag ".concat(t===e.Category_ID?"categoryFilter-tag--active":""),onClick:()=>c(e.Category_ID),children:[(0,a.jsx)("img",{src:e.Category_Image,alt:""}),(0,a.jsx)("p",{className:"categoryFilter-tag-title",children:e.Category_Name}),t===e.Category_ID&&(0,a.jsx)("button",{className:"categoryFilter-tag-closeButton",onClick:t=>{t.stopPropagation(),r(e.Category_ID)},children:(0,a.jsxs)("svg",{width:"10",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M1 8.5L8 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M8 8.5L1 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]},e.Category_ID))})})},F=[{id:5,title:"Рекомендуемые"},{id:3,title:"Сначала дешевле"},{id:4,title:"Сначала дороже"}];r(1804);let B=e=>{let{activeTag:t,onTagChange:r}=e,i=(0,s.useRef)(null),l=(0,s.useRef)([]),o=()=>{if(!t||!i.current)return;let e=F.findIndex(e=>e.title===t);if(-1!==e&&l.current[e]){let t=l.current[e];t&&i.current.querySelector(".slider-container")&&t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}};(0,s.useEffect)(()=>{t&&F.length>0&&setTimeout(o,300)},[t]);let n=e=>{r(e),e!==t&&setTimeout(o,50)};return(0,a.jsx)("div",{className:"tagsFilter",ref:i,children:(0,a.jsx)(L,{height:"38px",children:F.map((e,r)=>(0,a.jsxs)("div",{ref:e=>{l.current[r]=e},className:"tagsFilter-tag ".concat(t===e.title?"tagsFilter-tag--active":""," ").concat("Сначала дешевле"===e.title?"price-sort-tag":""),onClick:()=>n(e.title),children:[(0,a.jsx)("p",{className:"tagsFilter-tag-title",children:e.title}),t===e.title&&t.trim()===e.title.trim()&&(0,a.jsx)("button",{className:"tagsFilter-tag-closeButton",style:{display:t===e.title?"block":"none"},children:(0,a.jsxs)("svg",{width:"10",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M1 8.5L8 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M8 8.5L1 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]},e.id))})})},R=(0,g.PA)(e=>{let{activeCustomTag:t,onCustomTagChange:r,activeCategory:i}=e,[l,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)({}),[d,p]=(0,s.useState)(!0),m=(0,s.useRef)([]),h=(0,s.useRef)(null),[g,v]=(0,s.useState)(0),[f,x]=(0,s.useState)(0),[j,_]=(0,s.useState)(!1),[C,N]=(0,s.useState)([]),[y,b]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1),I=e=>{if(w)return;let a=t.includes(e);e.toLowerCase(),a?r(e):(b(e),k(!0),setTimeout(()=>{r(e),setTimeout(()=>{b(null),k(!1)},400)},200))},S=()=>{if(!l||!h.current||0===t.length)return;let e=Object.keys(n).findIndex(e=>t.includes(e));if(-1!==e&&m.current[e]){let t=m.current[e];if(t){let e=h.current,r=t.getBoundingClientRect(),a=e.getBoundingClientRect(),s=t.offsetLeft-a.width/2+r.width/2;e.scrollTo({left:s,behavior:"smooth"})}}};if((0,s.useEffect)(()=>{o(!0)},[]),(0,s.useEffect)(()=>{if(!l||d||0===Object.keys(n).length){0===Object.keys(n).length&&N([]);return}let e=setTimeout(()=>{let e=Object.keys(n).length,t=m.current.length>=e;if(t){for(let r=0;r<e;r++)if(!m.current[r]){t=!1;break}}if(t){let t=Array(e);for(let r=0;r<e;r++)t[r]=m.current[r].offsetWidth;N(t)}},50);return()=>clearTimeout(e)},[l,d,n]),(0,s.useEffect)(()=>{if(!l||d||0===Object.keys(n).length||0===C.length||C.length!==Object.keys(n).length)return;let e=()=>{let e=window.innerWidth;e>600&&(e=600);let t=Object.entries(n).length;if(0===t){x(0),v(0);return}let r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,a=0,s=0;for(let t=0;t<r;t++){let r=C[t];if("number"==typeof r){let t=r+5*(a>0);if(s+t<=e)s+=t,a++;else break}else break}return a},a=0,s=0;if(j){a=t;let i=r(e);if(i<t){let t=37+5*(r(e-37)>0),a=r(e-t);s=a>0?a:i}else s=i}else{let i=r(e);if(i<t){let t=37+5*(r(e-37)>0),l=r(e-t);l>0?(a=l,s=l):i>0?(a=i,s=i):(a=0,s=0)}else a=i,s=i}x(s),v(a)},t=setTimeout(e,50);return window.addEventListener("resize",e),()=>{clearTimeout(t),window.removeEventListener("resize",e)}},[l,n,d,j,C]),(0,s.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>{var e,r;let a={};if(!(null==(e=u.data)?void 0:e.overall_product_tags_by_category)){c({}),p(!1);return}if(i?a=u.data.overall_product_tags_by_category[i]||{}:Object.entries(u.data.overall_product_tags_by_category).forEach(e=>{let[,t]=e;t&&Object.entries(t).forEach(e=>{let[t,r]=e;a[t]?a[t]+=r:a[t]=r})}),(null==(r=u.data)?void 0:r.products)&&Array.isArray(u.data.products)){let e=u.data.products;if(i){let t=parseInt(i,10);e=e.filter(e=>e.categories&&Array.isArray(e.categories)&&e.categories.some(e=>e.Category_ID===t))}["sale","premium","new","hit","hot"].forEach(r=>{let s=t.includes(r),i=e.filter(e=>e.marks&&Array.isArray(e.marks)&&e.marks.some(e=>e.Mark_Name&&e.Mark_Name.toLowerCase()===r)).length;(s&&i>0||i>0)&&(a[r]=i)})}c(a),p(!1),t.length>0?(_(!0),v(Object.keys(a).length)):a&&Object.keys(a).length>0?v(Object.keys(a).length):v(0),x(0)},500);return()=>clearTimeout(e)},[i,u.data,l,t]),(0,s.useEffect)(()=>{l&&!d&&0!==Object.keys(n).length&&t.length>0&&(_(!0),v(Object.keys(n).length),setTimeout(()=>{S()},300))},[t,l,d,n]),(0,s.useEffect)(()=>{l&&!d&&t.length>0&&setTimeout(()=>{S()},500)},[l,d]),!l||d)return(0,a.jsx)("div",{className:"tagsFilter custom-tagsFilter tagsFilter-loading",children:(0,a.jsx)(E,{})});if(0===Object.keys(n).length)return(0,a.jsx)("div",{className:"tagsFilter custom-tagsFilter tagsFilter-empty",children:(0,a.jsx)("div",{className:"tagsFilter-empty-message"})});let T=Object.entries(n).sort((e,r)=>{let a=["sale","premium","new","hit","hot"],s=a.includes(e[0].toLowerCase()),i=a.includes(r[0].toLowerCase());if(s&&i)return a.indexOf(e[0].toLowerCase())-a.indexOf(r[0].toLowerCase());if(s)return -1;if(i)return 1;let l=t.includes(e[0]),o=t.includes(r[0]);return l&&!o?-1:!l&&o?1:0}),A=T.slice(0,0!==g||j||0!==f?g:0),L=!j&&T.length>f&&f>0,P=j&&T.length>f&&T.length>1;return(0,a.jsxs)("div",{className:"tagsFilter custom-tagsFilter",children:[(0,a.jsxs)("div",{ref:h,className:"custom-tagsFilter-tags ".concat(P?"custom-tagsFilter-tags--open":""),children:[A.map((e,r)=>{let[s,i]=e;return(0,a.jsx)("div",{ref:e=>{m.current[r]=e},suppressHydrationWarning:!0,className:"tagsFilter-tag \n                ".concat(t.includes(s)?"tagsFilter-tag--active":""," \n                ").concat("sale"===s.toLowerCase()?"tagsFilter-tag--sale":"","\n                ").concat("premium"===s.toLowerCase()?"tagsFilter-tag--premium":"","\n                ").concat("new"===s.toLowerCase()?"tagsFilter-tag--new":"","\n                ").concat("hit"===s.toLowerCase()?"tagsFilter-tag--hit":"","\n                ").concat("hot"===s.toLowerCase()?"tagsFilter-tag--hot":"","\n                ").concat(y===s?"tagsFilter-tag--moving-front":"","\n                ").concat(y&&y!==s&&r<3?"tagsFilter-tag--shifting":"","\n              "),onClick:()=>I(s),children:(0,a.jsxs)("p",{className:"tagsFilter-tag-title",children:["sale"===s.toLowerCase()?"Sale":"premium"===s.toLowerCase()?"Premium":"new"===s.toLowerCase()?"New":"hit"===s.toLowerCase()?"Хит":"hot"===s.toLowerCase()?"Hot":s,t.includes(s)?(0,a.jsx)("span",{className:"tagsFilter-tag-close",children:(0,a.jsxs)("svg",{width:"10",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M1 8.5L8 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M8 8.5L1 1.5",stroke:"#ffffff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}):(0,a.jsx)("span",{className:"tagsFilter-tag-count",children:i})]})},r)}),P&&(0,a.jsx)("button",{className:" tagsFilter-hideButton",onClick:()=>{_(!1),v(f)},children:(0,a.jsx)("p",{children:"Скрыть"})})]}),L&&(0,a.jsx)("button",{className:"tagsFilter-moreButton",onClick:()=>{_(!0),v(T.length)},children:(0,a.jsxs)("p",{children:[" Ещё (",T.length-f,")"]})})]})}),W=e=>{let{activeCustomTag:t,activeTag:r,activeCategory:i,setActiveCustomTag:o,setActiveTag:n,setActiveCategory:c,showTagFilter:d,showCategoryFilter:p,showCustomTags:u=!1,handleTagChange:m,handleCategoryChange:h,handleCustomTagChange:g}=e,v=(0,l.useSearchParams)(),[f,x]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(f)return;let e=null==v?void 0:v.get("tag"),r=null==v?void 0:v.get("category");e&&(["sale","premium","new","hit","hot"].includes(e.toLowerCase())?t.includes(e.toLowerCase())||g(e.toLowerCase()):n(e)),r&&c(Number(r)),x(!0)},[v,n,c,g,t,f]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"filters-panel ".concat(p?"filters-panel--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)("div",{className:"category-container ".concat(p?"category-container--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)(O,{activeCategory:i,onCategoryChange:h})})}),(0,a.jsx)("div",{className:"filters-panel ".concat(d?"filters-panel--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)("div",{className:"tags-container ".concat(d?"tags-container--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)(B,{activeTag:r,onTagChange:m})})}),(0,a.jsx)("div",{className:"filters-panel custom-filters-panel ".concat(u?"filters-panel--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)("div",{className:"tags-container ".concat(u?"tags-container--visible":""),suppressHydrationWarning:!0,children:(0,a.jsx)(R,{activeCustomTag:t,onCustomTagChange:g,activeCategory:i?i.toString():null})})})]})};r(6853);let H=(0,g.PA)(e=>{let{onSearch:t,inputRef:r,initialValue:i=""}=e,[l,n]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[p,u]=(0,s.useState)(""),m=(0,s.useRef)(null);return(0,s.useEffect)(()=>{n(!0),i&&(d(i),u(i))},[i]),(0,s.useEffect)(()=>{if(l)return m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{u(c)},300),()=>{m.current&&clearTimeout(m.current)}},[c,l]),(0,s.useEffect)(()=>{l&&void 0!==p&&t(p)},[p,t,l]),(0,a.jsx)("div",{className:"search-container",children:(0,a.jsxs)("div",{className:"search",children:[(0,a.jsx)("img",{src:"".concat(o,"search-component-icon.svg"),alt:""}),(0,a.jsx)("input",{type:"text",placeholder:k.ue.$.q,className:"search-input",value:c,onChange:e=>d(e.target.value),ref:r}),c&&(0,a.jsx)("button",{className:"clear-search-btn",onClick:()=>{d(""),u("")},children:"✕"})]})})});r(1360);let q={ACTIVE_CATEGORY:"brandbot_active_category",ACTIVE_TAG:"brandbot_active_tag",ACTIVE_CUSTOM_TAG:"brandbot_active_custom_tag",SHOW_TAG_FILTER:"brandbot_show_tag_filter",SHOW_CUSTOM_TAG_FILTER:"brandbot_show_custom_tag_filter",SEARCH_QUERY:"brandbot_search_query",SHOW_SEARCH:"brandbot_show_search"},U=()=>{let[e,t]=(0,s.useState)(!1),r=(0,l.useSearchParams)(),i=(e,t)=>{{let t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(e){console.error("Ошибка при парсинге данных из localStorage",e)}}return t},[n,c]=(0,s.useState)(""),[d,p]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[g,v]=(0,s.useState)([]),[f,x]=(0,s.useState)(!0),[j,_]=(0,s.useState)(!1),[C,N]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=e=>{{let t=window.location.hash;if(t&&t.includes("?"))return new URLSearchParams(t.split("?")[1]).get(e)}return null};c(i(q.SEARCH_QUERY,""));let a=r?r.get("category"):null,s=e("category");if(a){let e=parseInt(a,10);p(e),localStorage.setItem(q.ACTIVE_CATEGORY,JSON.stringify(e))}else if(s){let e=parseInt(s,10);p(e),localStorage.setItem(q.ACTIVE_CATEGORY,JSON.stringify(e))}else p(i(q.ACTIVE_CATEGORY,null));h(i(q.ACTIVE_TAG,null));let l=i(q.ACTIVE_CUSTOM_TAG,[]),o=r?r.get("tag"):null,n=e("tag"),d=o||n;d&&["sale","premium","new","hit","hot"].includes(d)?(v([d]),N(!0),localStorage.setItem(q.ACTIVE_CUSTOM_TAG,JSON.stringify([d])),localStorage.setItem(q.SHOW_CUSTOM_TAG_FILTER,JSON.stringify(!0))):(v(Array.isArray(l)?l:[]),N(Array.isArray(l)&&l.length>0||i(q.SHOW_CUSTOM_TAG_FILTER,!1)),(a||s)&&(N(!0),localStorage.setItem(q.SHOW_CUSTOM_TAG_FILTER,JSON.stringify(!0)))),_(i(q.SHOW_TAG_FILTER,!1)),b(i(q.SHOW_SEARCH,!1)),t(!0)},[r]);let w=(0,s.useRef)(null);return(0,s.useEffect)(()=>{y&&w.current&&setTimeout(()=>{var e;null==(e=w.current)||e.focus()},300)},[y]),(0,a.jsxs)("main",{className:"mt-[20px] px-[10px] w-full catalogMain \n        ".concat(m()?"catalogMain--ios":"","\n        "),children:[(0,a.jsxs)("div",{className:"mb-[13px]",children:[(0,a.jsxs)("div",{className:"catalog-top",children:[(0,a.jsx)("h1",{className:"catalog-top-title",children:k.Qs.U$.D}),(0,a.jsxs)("div",{className:"catalog-top-right",children:[(0,a.jsx)("button",{suppressHydrationWarning:!0,className:"catalog-top-right-button ".concat(e&&y?"active":""),onClick:()=>{b(!y),localStorage.setItem(q.SHOW_SEARCH,JSON.stringify(!y))},children:(0,a.jsx)("img",{src:"".concat(o,"search-icon.svg"),alt:""})}),(0,a.jsx)("button",{suppressHydrationWarning:!0,className:"catalog-top-right-button ".concat(e&&j?"active":""),onClick:()=>{let e=!j;_(e),localStorage.setItem(q.SHOW_TAG_FILTER,JSON.stringify(e))},children:(0,a.jsx)("img",{src:"".concat(o,"sort-icon.svg"),alt:""})}),(0,a.jsx)("button",{suppressHydrationWarning:!0,className:"catalog-top-right-button ".concat(e&&C?"active":""),onClick:()=>{let e=!C;N(e),localStorage.setItem(q.SHOW_CUSTOM_TAG_FILTER,JSON.stringify(e))},children:(0,a.jsx)("img",{src:"".concat(o,"filter-icon.svg"),alt:""})})]})]}),(0,a.jsx)("div",{suppressHydrationWarning:!0,className:"search-panel ".concat(e&&y?"search-panel--visible":""),children:(0,a.jsx)(H,{onSearch:e=>{c(e),localStorage.setItem(q.SEARCH_QUERY,JSON.stringify(e))},inputRef:w,initialValue:n})}),e&&(0,a.jsx)(s.Suspense,{children:(0,a.jsx)(W,{activeTag:u,activeCategory:d,activeCustomTag:g,setActiveTag:h,setActiveCategory:p,showTagFilter:j,showCategoryFilter:!0,showCustomTags:C,handleTagChange:e=>{let t=e===u?null:e;h(t),localStorage.setItem(q.ACTIVE_TAG,JSON.stringify(t))},handleCategoryChange:e=>{let t=e===d?null:e;localStorage.setItem(q.ACTIVE_CUSTOM_TAG,JSON.stringify([])),v([]),p(t),localStorage.setItem(q.ACTIVE_CATEGORY,JSON.stringify(t))},handleCustomTagChange:e=>{["sale","premium","new","hit","hot"].includes(e.toLowerCase()),v(t=>{let r;return r=t.includes(e)?t.filter(t=>t!==e):[...t,e],localStorage.setItem(q.ACTIVE_CUSTOM_TAG,JSON.stringify(r)),r.length>0&&!C&&(N(!0),localStorage.setItem(q.SHOW_CUSTOM_TAG_FILTER,JSON.stringify(!0))),r})},setActiveCustomTag:v})})]}),(0,a.jsx)(A,{isFavorites:!1,categoryFilter:d,tagFilter:u,customTagFilter:g,searchQuery:n})]})};r(9894);let V=(0,g.PA)(()=>{let e=w.favoritesIds.length>0,[t,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{r(!!w)},[e]),(0,a.jsx)("main",{className:"favoritesMain \n    ".concat(m()?"favoritesMain--ios":"","\n    "),children:t?e?(0,a.jsx)(A,{isFavorites:!0}):(0,a.jsxs)("div",{className:"favoritesMain-empty",children:[(0,a.jsx)("h2",{className:"favoritesMain-empty-title",children:"У вас пока нет избранных товаров"}),(0,a.jsxs)("p",{className:"favoritesMain-empty-text",children:["Нажмите на"," ",(0,a.jsx)("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"transparent",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block"},children:(0,a.jsx)("path",{d:"M9.30663 14.7267L9.30662 14.7267L9.30029 14.7289C9.24983 14.7467 9.14099 14.7668 8.99996 14.7668C8.85893 14.7668 8.75009 14.7467 8.69963 14.7289L8.69964 14.7289L8.69329 14.7267C7.57825 14.346 5.71238 13.3333 4.13388 11.716C2.56322 10.1067 1.31663 7.94228 1.31663 5.24183C1.31663 3.02277 3.10364 1.2335 5.29996 1.2335C6.60123 1.2335 7.75317 1.86153 8.47812 2.8377C8.60075 3.00282 8.79429 3.10016 8.99996 3.10016C9.20563 3.10016 9.39917 3.00282 9.5218 2.8377C10.2464 1.86206 11.4064 1.2335 12.7 1.2335C14.8963 1.2335 16.6833 3.02277 16.6833 5.24183C16.6833 7.94228 15.4367 10.1067 13.866 11.716C12.2875 13.3333 10.4217 14.346 9.30663 14.7267Z",stroke:"#6C6C6C",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})}),", чтобы сохранить любой понравившийся товар"]})]}):(0,a.jsx)(E,{})})});var J=r(414),z=r(3765),Y=r.n(z);r(6153);let G=e=>{let{message:t,onClose:r,onRetry:s}=e;return t?(0,a.jsx)("div",{className:"error-modal-overlay",onClick:r,children:(0,a.jsxs)("div",{className:"error-modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"error-modal-close",onClick:r,children:(0,a.jsx)("img",{src:"".concat(o,"close-icon.svg"),alt:"Закрыть"})}),(0,a.jsxs)("div",{className:"error-modal-content",children:[(0,a.jsx)("h3",{className:"error-modal-title",children:"Ошибка"}),(0,a.jsx)("p",{className:"error-modal-message",children:t}),(0,a.jsxs)("div",{className:"error-modal-buttons",children:[(0,a.jsx)("button",{className:"error-modal-button",onClick:r,children:"Закрыть"}),s&&(0,a.jsx)("button",{className:"error-modal-button error-modal-retry",onClick:s,children:"Повторить"})]})]})]})}):null},Q=e=>{var t,r,s,i,l,n,c,d;let{onClose:p,orderResponse:m,orderProducts:h,onPay:g}=e,v=(null==(r=u.data)||null==(t=r.special_project_parameters)?void 0:t.PAYMENT_SYSTEM_INSERT_TEXT_description)||"",f=(null==(i=u.data)||null==(s=i.special_project_parameters)?void 0:s.PAYMENT_SYSTEM_INSERT_TEXT_extra_field_1)||"",x=parseFloat((null==m?void 0:m.payment_type)==="delivery"?null==(n=u.data)||null==(l=n.special_project_parameters)?void 0:l.cart_delivery_price_offline_value:null==(d=u.data)||null==(c=d.special_project_parameters)?void 0:c.cart_delivery_price_value)||0;return(0,a.jsx)("div",{className:"error-modal-overlay",onClick:p,children:(0,a.jsxs)("div",{className:"error-modal order-success-modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"error-modal-close",onClick:p,children:(0,a.jsx)("img",{src:"".concat(o,"close-icon.svg"),alt:"Закрыть"})}),(0,a.jsxs)("div",{className:"success-modal-content",children:[(0,a.jsxs)("div",{className:"success-top-info",children:[(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:v}}),(null==m?void 0:m.order_id)&&(0,a.jsxs)("div",{className:"order-id",children:["Заказ: № ",m.order_id]})]}),(0,a.jsx)("div",{className:"order-products-container",children:h.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"order-product-item",children:[(0,a.jsx)("div",{className:"order-product-image",children:(0,a.jsx)("img",{src:(null==(r=e.selectedColor)?void 0:r.image)||e.images[0].Image_URL,alt:e.Product_Name})}),(0,a.jsxs)("div",{className:"order-product-info",children:[(0,a.jsx)("div",{className:"order-product-name",children:e.Product_Name}),e.parameters&&(0,a.jsxs)("div",{className:"order-product-size",children:["Размер обуви"===e.parameters.name?"Размер":e.parameters.name,": ",e.parameters.parameter_string]}),e.selectedColor&&(0,a.jsxs)("div",{className:"order-product-color",children:["Цвет: ",e.selectedColor.name,(0,a.jsx)("span",{className:"color-dot",style:{backgroundColor:e.selectedColor.code||"#ccc"}})]}),(0,a.jsxs)("div",{className:"order-product-price",children:[e.final_price||e.parameters.price," ₽"]})]}),(0,a.jsxs)("div",{className:"order-product-quantity",children:["x",e.quantity||1]})]},t)})}),(0,a.jsxs)("div",{className:"order-total",children:[(0,a.jsx)("div",{className:"order-total-text",children:"Итого:"}),(0,a.jsxs)("div",{className:"order-total-price",children:[h.reduce((e,t)=>e+t.parameters.price*(t.quantity||1),0)+x," ","₽"]})]}),(null==m?void 0:m.payment_link)&&(0,a.jsxs)("div",{className:"payment-link-container",children:[(0,a.jsx)("p",{className:"payment-link-label",children:"Ваша ссылка на оплату:"}),(0,a.jsx)("a",{href:m.payment_link,target:"_blank",rel:"noopener noreferrer",className:"payment-link-button",onClick:g,children:(0,a.jsx)("span",{className:"payment-link-text",children:"ОПЛАТИТЬ"})}),(0,a.jsx)("p",{className:"payment-link-help",children:"Если ссылка не открылась автоматически, пожалуйста, нажмите на неё повторно."})]}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:f},className:"payment-extra-info"})]})]})})},Z=e=>{var t,r,s,i,l,n,c,d;let{onClose:p,orderResponse:m,orderProducts:h,managerContact:g,onContactClick:v}=e,f=(null==(r=u.data)||null==(t=r.special_project_parameters)?void 0:t.PAYMENT_SYSTEM_INSERT_TEXT_description)||"",x=parseFloat(null==(i=u.data)||null==(s=i.special_project_parameters)?void 0:s.cart_delivery_price_offline_value)||0;null==(n=u.data)||null==(l=n.special_project_parameters)||l.manager_button_text;let j=(null==(d=u.data)||null==(c=d.special_project_parameters)?void 0:c.manager_display_contact)||g,_=(e=>{if(!e)return"#";let t=e.replace(/^@/,"");return e.startsWith("@")||e.includes("t.me/")?"https://t.me/".concat(t):e.includes("wa.me/")||e.includes("whatsapp")?"https://wa.me/".concat(t.replace(/\D/g,"")):e.includes("vk.com")?"https://vk.com/".concat(t.replace("vk.com/","")):/^[+\d\s()-]{10,}$/.test(e)?"https://wa.me/".concat(t.replace(/\D/g,"")):"https://t.me/".concat(t)})(g);return(0,a.jsx)("div",{className:"error-modal-overlay",onClick:p,children:(0,a.jsxs)("div",{className:"error-modal order-success-modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"error-modal-close",onClick:p,children:(0,a.jsx)("img",{src:"".concat(o,"close-icon.svg"),alt:"Закрыть"})}),(0,a.jsxs)("div",{className:"success-modal-content",children:[(0,a.jsxs)("div",{className:"success-top-info",children:[(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:f}}),(null==m?void 0:m.order_id)&&(0,a.jsxs)("div",{className:"order-id",children:["Заказ: № ",m.order_id]})]}),(0,a.jsx)("div",{className:"order-products-container",children:h.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"order-product-item",children:[(0,a.jsx)("div",{className:"order-product-image",children:(0,a.jsx)("img",{src:(null==(r=e.selectedColor)?void 0:r.image)||e.images[0].Image_URL,alt:e.Product_Name})}),(0,a.jsxs)("div",{className:"order-product-info",children:[(0,a.jsx)("div",{className:"order-product-name",children:e.Product_Name}),e.parameters&&(0,a.jsxs)("div",{className:"order-product-size",children:["Размер обуви"===e.parameters.name?"Размер":e.parameters.name,": ",e.parameters.parameter_string]}),e.selectedColor&&(0,a.jsxs)("div",{className:"order-product-color",children:["Цвет: ",e.selectedColor.name,(0,a.jsx)("span",{className:"color-dot",style:{backgroundColor:e.selectedColor.code||"#ccc"}})]}),(0,a.jsxs)("div",{className:"order-product-price",children:[e.final_price||e.parameters.price," ₽"]})]}),(0,a.jsxs)("div",{className:"order-product-quantity",children:["x",e.quantity||1]})]},t)})}),(0,a.jsxs)("div",{className:"order-total",children:[(0,a.jsx)("div",{className:"order-total-text",children:"Итого:"}),(0,a.jsxs)("div",{className:"order-total-price",children:[h.reduce((e,t)=>{var r;return e+(t.final_price||(null==(r=t.parameters)?void 0:r.price)||0)*(t.quantity||1)},0)+x," ","₽"]})]}),(0,a.jsxs)("div",{className:"contact-manager-container",children:[(0,a.jsx)("p",{className:"contact-manager-text",children:"Для оплаты заказа свяжитесь с менеджером:"}),(0,a.jsxs)("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"contact-manager-button",onClick:v,children:[(0,a.jsx)("div",{className:"contact-manager-telegram-icon",children:(0,a.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#a)",fillRule:"evenodd",clipRule:"evenodd",children:[(0,a.jsx)("path",{d:"M24.5 12c0-6.628-5.372-12-12-12S.5 5.372.5 12s5.372 12 12 12 12-5.372 12-12",fill:"url(#b)"}),(0,a.jsx)("path",{d:"m5.666 11.297 7.797-3.238c.77-.338 3.381-1.417 3.381-1.417s1.205-.473 1.105.675c-.034.472-.302 2.124-.57 3.912l-.836 5.295s-.067.776-.636.911-1.506-.472-1.673-.607c-.134-.101-2.51-1.619-3.38-2.36-.235-.203-.503-.608.033-1.08a129 129 0 0 0 3.514-3.373c.402-.405.804-1.35-.87-.203l-4.719 3.205s-.535.337-1.54.033c-1.003-.303-2.175-.708-2.175-.708s-.803-.506.57-1.045z",fill:"#fff"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"b",x1:"55.831",y1:"13.231",x2:"34.179",y2:"61.344",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#37AEE2"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#1E96C8"})]}),(0,a.jsx)("clipPath",{id:"a",children:(0,a.jsx)("path",{fill:"#fff",d:"M.5 0h24v24H.5z"})})]})]})}),(0,a.jsx)("span",{className:"contact-manager-text",children:j})]}),(0,a.jsx)("p",{className:"contact-manager-instructions",children:"Укажите номер заказа при общении с менеджером для быстрой обработки."})]})]})]})})},K=e=>{var t,r,s,i,l,n;let{onClose:c,orderResponse:d,orderProducts:p,onConfirm:m}=e,h=(null==(r=u.data)||null==(t=r.special_project_parameters)?void 0:t.PAYMENT_SYSTEM_INSERT_TEXT_description)||'<p class="cart-link-popup-imitator-container-thanksForOrder">Спасибо за заказ!</p>',g=(null==(i=u.data)||null==(s=i.special_project_parameters)?void 0:s.PAYMENT_SYSTEM_INSERT_TEXT_extra_field_1)||"",v=parseFloat(null==(n=u.data)||null==(l=n.special_project_parameters)?void 0:l.cart_delivery_price_value)||0;return(0,a.jsx)("div",{className:"error-modal-overlay",onClick:c,children:(0,a.jsxs)("div",{className:"error-modal order-success-modal softpay-modal",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:"error-modal-close",onClick:c,children:(0,a.jsx)("img",{src:"".concat(o,"close-icon.svg"),alt:"Закрыть"})}),(0,a.jsxs)("div",{className:"success-modal-content",children:[(0,a.jsxs)("div",{className:"success-top-info",children:[(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:h}}),(null==d?void 0:d.order_id)&&(0,a.jsxs)("div",{className:"order-id",children:["Заказ № ",d.order_id]})]}),(0,a.jsx)("div",{className:"order-products-container",children:p.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"order-product-item",children:[(0,a.jsx)("div",{className:"order-product-image",children:(0,a.jsx)("img",{src:(null==(r=e.selectedColor)?void 0:r.image)||e.images[0].Image_URL,alt:e.Product_Name})}),(0,a.jsxs)("div",{className:"order-product-info",children:[(0,a.jsx)("div",{className:"order-product-name",children:e.Product_Name}),e.parameters&&(0,a.jsxs)("div",{className:"order-product-size",children:["Размер обуви"===e.parameters.name?"Размер":e.parameters.name,": ",e.parameters.parameter_string]}),e.selectedColor&&(0,a.jsxs)("div",{className:"order-product-color",children:["Цвет: ",e.selectedColor.name,(0,a.jsx)("span",{className:"color-dot",style:{backgroundColor:e.selectedColor.code||"#ccc"}})]}),(0,a.jsxs)("div",{className:"order-product-price",children:[e.final_price||e.parameters.price," ₽"]})]}),(0,a.jsxs)("div",{className:"order-product-quantity",children:["x",e.quantity||1]})]},t)})}),(0,a.jsxs)("div",{className:"order-total",children:[(0,a.jsx)("div",{className:"order-total-text",children:"Итого:"}),(0,a.jsxs)("div",{className:"order-total-price",children:[p.reduce((e,t)=>e+t.parameters.price*(t.quantity||1),0)+v," ","₽"]})]}),(0,a.jsx)("div",{className:"payment-instructions-softpay",dangerouslySetInnerHTML:{__html:g}}),(0,a.jsx)("button",{className:"error-modal-button softpay-confirm-button",onClick:m,children:"Хорошо"})]})]})})},$=(0,g.PA)(()=>{var e,t,r,l,d,p,h,g,v,x,j;let[_,C]=(0,s.useState)(1),[N,y]=(0,s.useState)(!1),[b,w]=(0,s.useState)(!1),[k,I]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1),[L,P]=(0,s.useState)("pending"),[D,M]=(0,s.useState)(!1),[O,F]=(0,s.useState)(null),[B,R]=(0,s.useState)([]),[W,H]=(0,s.useState)(null),[q,U]=(0,s.useState)(""),[V,z]=(0,s.useState)(""),[$,X]=(0,s.useState)(""),[ee,et]=(0,s.useState)(""),[er,ea]=(0,s.useState)(""),[es,ei]=(0,s.useState)(""),[el,eo]=(0,s.useState)(""),[en,ec]=(0,s.useState)(""),[ed,ep]=(0,s.useState)(""),[eu,em]=(0,s.useState)(""),[eh,eg]=(0,s.useState)(""),[ev,ef]=(0,s.useState)(""),[ex,ej]=(0,s.useState)(""),[e_,eC]=(0,s.useState)(""),[eN,ey]=(0,s.useState)(""),[eb,ew]=(0,s.useState)(""),[ek,eI]=(0,s.useState)(2),eS=e=>e?e.includes("_")||e.length<18?(X("Введите полный номер телефона"),!1):(X(""),!0):(X(""),!1),eT=()=>{U(""),em(""),ef(""),ej(""),eC(""),eg(""),ey(""),ew(""),z(""),X(""),et(""),ea(""),ei(""),eo(""),ec(""),ep("")},eE=()=>{eI(window.innerWidth>=540?3:2)},eA=()=>f.items.reduce((e,t)=>e+t.parameters.price*(t.quantity||1),0),eL=((null==(e=u.data)?void 0:e.special_project_parameters_actions)||[]).find(e=>"p23"===e.action_type),eP=eL?Number(eL.extra_field_1):0,eD=eL?Number(eL.extra_field_2):0,eM=()=>{let e=f.items.reduce((e,t)=>e+(t.quantity||1),0);return!eL||e<2?0:2===e?Math.ceil(eA()*(eP/100)):Math.ceil(eA()*(eD/100))};null===J.OJ||void 0===J.OJ||null==(t=J.OJ.products)||t.filter(e=>!0===e.OnMain).slice(0,4);let eO=e=>{e.preventDefault(),e.stopPropagation()},eF=(e,t,r)=>{{let i=localStorage.getItem("addedSettingItems");if(i)try{let l=JSON.parse(i),o=f.items.find(a=>{var s,i;return a.Product_ID===e&&(!t||(null==(s=a.parameters)?void 0:s.parameter_string)===t)&&(!r||(null==(i=a.selectedColor)?void 0:i.id)===r)});if(o){var a,s;let t=null==(a=o.parameters)?void 0:a.Parameter_ID,r=null==(s=o.selectedColor)?void 0:s.id,i=l.filter(a=>{let s=a.productId!==e,i=t&&a.id!==t,l=r&&a.colorId!==r;return s||i||l});localStorage.setItem("addedSettingItems",JSON.stringify(i))}}catch(e){console.error("Ошибка при обработке данных из localStorage:",e)}}},eB=(e,t,r,a)=>{eF(e,r||"",a),(0,n.h5)(()=>{f.items.length,f.items=f.items.filter(t=>{var s,i;let l=t.Product_ID===e,o=!r||(null==(s=t.parameters)?void 0:s.parameter_string)===r,n=!a||(null==(i=t.selectedColor)?void 0:i.id)===a;return!(l&&o&&n)})})},eR=()=>{let e=!0,t=[];return z(""),X(""),et(""),ea(""),ep(""),q.trim()||(z("error"),e=!1,t.push("ФИО")),(!eu||eu.includes("_")||eu.length<18)&&(X("error"),e=!1,t.push("Телефон")),ev.trim()||(et("error"),e=!1,t.push("Город и улица")),ex.trim()||(ea("error"),e=!1,t.push("Дом")),0===f.items.length?(ep("Корзина пуста. Добавьте товары для оформления заказа."),w(!0),e=!1):t.length>0&&(ep("Пожалуйста, заполните следующие поля: ".concat(t.join(", "))),w(!0)),e},eW=()=>{var e,t,r,a;return parseFloat(N&&2===_?null==(t=u.data)||null==(e=t.special_project_parameters)?void 0:e.cart_delivery_price_offline_value:null==(a=u.data)||null==(r=a.special_project_parameters)?void 0:r.cart_delivery_price_value)||0},eH=async()=>{var e,t,r,a;if(!eR())return;M(!0),f.items.filter(e=>e.quantity&&e.quantity>0).map(e=>{var t,r,a;let s=Math.max(0,((null==(t=e.parameters)?void 0:t.price)||e.Price||0)-((null==(r=e.selectedColor)?void 0:r.discount)||0));return{ID:e.Product_ID,name:e.Name,price:s,quantity:e.quantity||0,parameter:(null==(a=e.parameters)?void 0:a.parameter_string)||"",color:e.selectedColor?{name:e.selectedColor.name,code:e.selectedColor.code}:null}});let s=eu?eu.replace(/[^\d+]/g,""):"",i=f.items.map(e=>{var t,r;let a={product_id:e.Product_ID,parameter_id:(null==(t=e.parameters)?void 0:t.Parameter_ID)||0,quantity:e.quantity||1};return(null==(r=e.selectedColor)?void 0:r.id)&&(a.color=e.selectedColor.id),a}),l={tg_user_id:(null==(a=window.Telegram)||null==(r=a.WebApp)||null==(t=r.initDataUnsafe)||null==(e=t.user)?void 0:e.id)||0x2cb3f70b,fio:q,phone:s,city:ev,house:ex,apartment:e_,comment:eN,payment_type:N&&2===_?"delivery":"online",promocode:eb||"",products:i};console.log(l),H(l);try{P(!0);let e=await c.post("/order",l),t=[...f.items];R(t),F(e.data),(0,n.h5)(()=>{f.items=[],localStorage.removeItem("addedSettingItems")}),I(!0),P(!1),M(!1)}catch(t){let e="Не удалось отправить заказ. Пожалуйста, попробуйте позже.";t.response?t.response.data&&"object"==typeof t.response.data&&"message"in t.response.data?e=t.response.data.message:400===t.response.status?e="Некорректные данные заказа. Пожалуйста, проверьте введенную информацию.":401===t.response.status?e="Необходима авторизация для оформления заказа.":500===t.response.status&&(e="Внутренняя ошибка сервера. Пожалуйста, попробуйте позже."):t.request&&(e="Сервер не отвечает. Пожалуйста, проверьте ваше соединение с интернетом."),ep(e),w(!0),P(!1),M(!1)}},eq=()=>{{let e=Object.keys(localStorage),t=["DataStore","FavoritesStore","ShoppingCartStore"];e.forEach(e=>{t.includes(e)||localStorage.removeItem(e)})}},eU=()=>{I(!1)},eV=async()=>{if(!W){ep("Не удалось повторить отправку заказа. Попробуйте снова заполнить форму."),w(!0);return}M(!0),w(!1);try{let e=await c.post("/order",W);F(e.data),(0,n.h5)(()=>{f.items=[],localStorage.removeItem("addedSettingItems")}),I(!0),P(!1),M(!1),H(null)}catch(t){let e="Не удалось отправить заказ. Пожалуйста, попробуйте позже.";t.response?t.response.data&&"object"==typeof t.response.data&&"message"in t.response.data?e=t.response.data.message:400===t.response.status?e="Некорректные данные заказа. Пожалуйста, проверьте введенную информацию.":401===t.response.status?e="Необходима авторизация для оформления заказа.":500===t.response.status&&(e="Внутренняя ошибка сервера. Пожалуйста, попробуйте позже."):t.request&&(e="Сервер не отвечает. Пожалуйста, проверьте ваше соединение с интернетом."),ep(e),w(!0),P(!1),M(!1)}};return(0,s.useEffect)(()=>{var e,t;T(m()),eE(),window.addEventListener("resize",eE);let r=(null==(t=u.data)||null==(e=t.special_project_parameters)?void 0:e.cart_allow_post_payment_value)==="yes";return y(r),r||C(1),()=>{window.removeEventListener("resize",eE)}},[u.data]),(0,s.useEffect)(()=>{0===f.items.length?P(!1):P(!0)},[f.items]),(0,a.jsxs)("main",{"data-page":"cart",className:"mt-[15px] px-[10px] w-full shoppingCart-main ".concat(S?"shoppingCart-main--ios":""),children:[b&&(0,a.jsx)(G,{message:ed,onClose:()=>{w(!1)},onRetry:W?eV:void 0}),k&&(null==(l=u.data)||null==(r=l.special_project_parameters)?void 0:r.PAYMENT_SYSTEM_value)==="yokassa"&&(0,a.jsx)(Q,{onClose:eU,orderResponse:O,orderProducts:B,onPay:()=>{eT(),f.clearCart(),eq(),I(!1)}}),k&&(null==(p=u.data)||null==(d=p.special_project_parameters)?void 0:d.PAYMENT_SYSTEM_value)==="no"&&(0,a.jsx)(Z,{onClose:eU,orderResponse:O,orderProducts:B,managerContact:null==(g=u.data)||null==(h=g.special_project_parameters)?void 0:h.telegram_manager_contact_value,onContactClick:()=>{eT(),f.clearCart(),eq(),I(!1);try{if(window.Telegram&&window.Telegram.WebApp){var e,t;let r=null==(t=u.data)||null==(e=t.special_project_parameters)?void 0:e.telegram_manager_contact_value;if(r){let e=r.replace(/^@/,"");return window.Telegram.WebApp.openLink("https://t.me/".concat(e)),!1}}}catch(e){}}}),k&&(null==(x=u.data)||null==(v=x.special_project_parameters)?void 0:v.PAYMENT_SYSTEM_value)==="softpay"&&(0,a.jsx)(K,{onClose:eU,orderResponse:O,orderProducts:B,onConfirm:()=>{eT(),f.clearCart(),eq(),I(!1)}}),"pending"===L?(0,a.jsx)(E,{}):(0,a.jsxs)(a.Fragment,{children:[!0===L&&(0,a.jsxs)("div",{className:"shoppingCart-header",children:[(0,a.jsx)("h1",{className:"shoppingCart-header-title",children:"Корзина"}),f.items.length>0&&(0,a.jsx)("button",{onClick:()=>{f.clearCart(),eq()},className:"shoppingCart-header-button",children:"Очистить корзину"})]}),!1===L?(0,a.jsxs)("div",{className:"empty-cart  \n                ".concat(m()?"empty-cart--ios":"","\n                "),children:[(0,a.jsxs)("div",{className:"empty-cart-text",children:[(0,a.jsx)("p",{className:"empty-cart-message",children:"Корзина пуста"}),(0,a.jsxs)("p",{className:"empty-cart-suggestion",children:["Воспользуйтесь каталогом ",(0,a.jsx)("br",{})," или поиском для выбора товаров"]})]}),(0,a.jsxs)("div",{className:"recommended-products",children:[(0,a.jsx)("h2",{className:"recommended-title",children:"Рекомендуем"}),(0,a.jsx)("div",{className:"limited-products-grid",children:(0,a.jsx)(A,{isFavorites:!1,limit:ek,importanceFilter:!0})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"shoppingCart-productsContainer",children:null==(j=f.items)?void 0:j.map((e,t)=>{var r,s;return(0,a.jsxs)(i.k2,{to:"/product/".concat(e.Product_ID),className:"shoppingCart-product",children:[(0,a.jsx)("div",{onClick:eO,className:"shoppingCart-product-image-container",children:(0,a.jsx)("img",{className:"shoppingCart-product-image",src:(null==(r=e.selectedColor)?void 0:r.image)||e.images[0].Image_URL,alt:""})}),(0,a.jsxs)("div",{className:"shoppingCart-product-info",children:[(0,a.jsxs)("div",{className:"shoppingCart-product-nameSize",children:[(0,a.jsx)("div",{className:"shoppingCart-product-name",children:e.Product_Name}),e.parameters&&(0,a.jsxs)("div",{className:"shoppingCart-product-size",children:["Размер обуви"===e.parameters.name?"Размер":e.parameters.name,": ",e.parameters.parameter_string]}),e.selectedColor&&(0,a.jsxs)("div",{className:"shoppingCart-product-color",children:["Цвет:"," ",(0,a.jsx)("span",{className:"color-name",children:e.selectedColor.name}),(0,a.jsx)("span",{className:"color-dot",style:{backgroundColor:e.selectedColor.code||"#ccc"}})]})]}),(0,a.jsxs)("div",{className:"shoppingCart-product-priceQuantity",children:[(0,a.jsxs)("div",{className:"shoppingCart-product-priceWrapper",children:[(0,a.jsxs)("p",{className:"shoppingCart-product-price",children:[e.final_price||e.parameters.price," ₽"]}),(null==(s=e.selectedColor)?void 0:s.discount)>0&&(0,a.jsxs)("p",{className:"shoppingCart-product-oldPrice",children:[e.parameters.price," ₽"]})]}),(0,a.jsxs)("div",{className:"shoppingCart-product-quantityControl",onClick:eO,children:[(0,a.jsx)("button",{type:"button",onClick:()=>{var t,r;return f.decreaseQuantity(e.Product_ID,null==(t=e.parameters)?void 0:t.parameter_string,null==(r=e.selectedColor)?void 0:r.id)},className:"shoppingCart-product-quantityControl-button",children:"-"}),(0,a.jsx)("p",{className:"shoppingCart-product-quantityControl-value",children:e.quantity||1}),(0,a.jsx)("button",{type:"button",onClick:()=>{var t,r;return f.increaseQuantity(e.Product_ID,null==(t=e.parameters)?void 0:t.parameter_string,null==(r=e.selectedColor)?void 0:r.id)},className:"shoppingCart-product-quantityControl-button",children:"+"})]})]})]}),(0,a.jsx)("button",{type:"button",onClick:t=>{var r,a;t.preventDefault(),t.stopPropagation(),eB(e.Product_ID,e.Product_Name,null==(r=e.parameters)?void 0:r.parameter_string,null==(a=e.selectedColor)?void 0:a.id)},className:"shoppingCart-product-delete",children:(0,a.jsx)("img",{src:"".concat(o,"close-icon.svg"),alt:"",className:"shoppingCart-product-delete-icon"})})]},t)})}),(0,a.jsxs)("form",{className:"shoppingCart-form",children:[(0,a.jsxs)("div",{className:"shoppingCart-form-contactInfo",children:[(0,a.jsx)("h2",{className:"shoppingCart-form-contactInfo-title",children:"Контактная информация"}),(0,a.jsxs)("div",{className:"shoppingCart-form-contactInfo-fieldsContainer",children:[(0,a.jsx)("div",{className:"input-wrapper",children:(0,a.jsx)("input",{type:"text",placeholder:"ФИО",value:q,onChange:e=>{let t=e.target.value;/^[а-яА-ЯёЁa-zA-Z\s-]*$/.test(t)?(U(t),V&&z("")):z("Только буквы и пробелы")},className:"shoppingCart-form-contactInfo-fieldsContainer-input ".concat(V?"input-error":"")})}),(0,a.jsx)("div",{className:"input-wrapper",children:(0,a.jsx)(Y(),{mask:["+","7"," ","(",/[0-9]/,/[0-9]/,/[0-9]/,")"," ",/[0-9]/,/[0-9]/,/[0-9]/," ",/[0-9]/,/[0-9]/,"-",/[0-9]/,/[0-9]/],placeholder:"+7 (___) ___ __-__",guide:!0,value:eu,onChange:e=>{let t=e.target.value;em(t),eS(t)},type:"tel",className:"shoppingCart-form-contactInfo-fieldsContainer-input ".concat($?"input-error":"")})})]})]}),(0,a.jsxs)("div",{className:"shoppingCart-form-deliveryInfo",children:[(0,a.jsx)("h2",{className:"shoppingCart-form-deliveryInfo-title",children:"Способ доставки"}),(0,a.jsxs)("button",{type:"button",className:"shoppingCart-form-deliveryInfo-cdekButton",children:[(0,a.jsxs)("div",{className:"shoppingCart-form-deliveryInfo-cdekButton-top",children:[(0,a.jsx)("img",{src:"".concat(o,"cdek-icon.svg"),alt:""}),(0,a.jsx)("p",{className:"shoppingCart-form-deliveryInfo-cdekButton-top-text",children:"(выбор 97% клиентов)"})]}),(0,a.jsx)("p",{className:"shoppingCart-form-deliveryInfo-cdekButton-text",children:'Доставка осуществляется транспортной компанией CDEK по тарифам компании. Нажмите "Выбрать адрес" и выберите пункт выдачи на карте'}),(0,a.jsx)("img",{src:"".concat(o,"payment-choiced-icon.svg"),alt:"",className:"shoppingCart-form-deliveryInfo-cdekButton-icon"})]}),(0,a.jsx)("h3",{className:"shoppingCart-form-deliveryInfo-addressTitle",children:"Адрес доставки (или СДЕК)"}),(0,a.jsxs)("div",{className:"shoppingCart-form-deliveryInfo-addressInputsContainer",children:[(0,a.jsx)("input",{type:"text",placeholder:"Город и улица",value:ev,onChange:e=>{let t=e.target.value;ef(t),t.trim()?et(""):et("Введите город и улицу")},className:"shoppingCart-form-deliveryInfo-fullWidthInput ".concat(ee?"input-error":"")}),(0,a.jsxs)("div",{className:"shoppingCart-form-deliveryInfo-inputsRow",children:[(0,a.jsx)("div",{className:"input-wrapper",children:(0,a.jsx)("input",{type:"text",placeholder:"Дом",value:ex,onChange:e=>{let t=e.target.value;ej(t),t.trim()?ea(""):ea("Введите номер дома")},className:"shoppingCart-form-deliveryInfo-halfWidthInput ".concat(er?"input-error":"")})}),(0,a.jsx)("input",{type:"text",placeholder:"Квартира",value:e_,onChange:e=>eC(e.target.value),className:"shoppingCart-form-deliveryInfo-halfWidthInput"})]})]}),(0,a.jsx)("input",{type:"text",placeholder:"Комментарий к заказу",onChange:e=>ey(e.target.value),className:"shoppingCart-form-deliveryInfo-commentField"})]}),N&&(0,a.jsxs)("div",{className:"shoppingCart-form-paymentType",children:[(0,a.jsx)("h2",{className:"shoppingCart-form-paymentType-title",children:"Тип оплаты"}),(0,a.jsxs)("div",{className:"shoppingCart-form-paymentType-buttons",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>C(1),className:"shoppingCart-form-paymentType-button ".concat(1===_&&"shoppingCart-form-paymentType-button--active"),children:[(0,a.jsx)("p",{className:"shoppingCart-form-paymentType-text",children:"Оплата онлайн в приложении"}),(0,a.jsx)("div",{className:"shoppingCart-form-paymentType-checkbox",children:1===_&&(0,a.jsx)("img",{src:"".concat(o,"payment-choiced-icon.svg"),alt:"",className:"shoppingCart-form-paymentType-icon"})})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>C(2),className:"shoppingCart-form-paymentType-button ".concat(2===_&&"shoppingCart-form-paymentType-button--active"),children:[(0,a.jsx)("p",{className:"shoppingCart-form-paymentType-text",children:"Оплата при получении"}),(0,a.jsx)("div",{className:"shoppingCart-form-paymentType-checkbox",children:2===_&&(0,a.jsx)("img",{src:"".concat(o,"payment-choiced-icon.svg"),alt:"",className:"shoppingCart-form-paymentType-icon"})})]})]})]}),(0,a.jsxs)("div",{className:"shoppingCart-form-paymentInfo",children:[(0,a.jsx)("h2",{className:"shoppingCart-form-paymentInfo-title",children:"Форма оплаты"}),(0,a.jsxs)("button",{className:"shoppingCart-form-paymentInfo-sbpButton",children:[(0,a.jsxs)("div",{className:"shoppingCart-form-paymentInfo-sbpButton-top",children:[(0,a.jsx)("p",{className:"shoppingCart-form-paymentInfo-sbpButton-top-text",children:"Оплата по СБП"}),(0,a.jsx)("img",{src:"".concat(o,"sbp-icon.svg"),alt:""})]}),(0,a.jsx)("p",{className:"shoppingCart-form-paymentInfo-sbpButton-text",children:"После оформления заказа вы сможете получить реквизиты для оплаты по системе СБП"}),(0,a.jsx)("img",{src:"".concat(o,"payment-choiced-icon.svg"),alt:"",className:"shoppingCart-form-paymentInfo-sbpButton-icon"})]})]}),(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo",children:[(0,a.jsx)("h2",{className:"shoppingCart-form-totalInfo-title",children:"Промокод"}),(0,a.jsx)("input",{type:"text",placeholder:"Введите промокод",onChange:e=>ew(e.target.value),className:"shoppingCart-form-totalInfo-input"}),(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-pricesContainer",children:[(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-pricesContainer-item",children:[(0,a.jsx)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:"Сумма заказа"}),(0,a.jsxs)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:[eA()," ₽"]})]}),(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-pricesContainer-item",children:[(0,a.jsx)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:"Доставка"}),(0,a.jsxs)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:[eW()," ₽"]})]}),eM()>0&&(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-pricesContainer-item",children:[(0,a.jsx)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:"Скидка"}),(0,a.jsxs)("p",{className:"shoppingCart-form-totalInfo-pricesContainer-item-text",children:["-",eM()," ₽"]})]})]}),(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-summary",children:[(0,a.jsxs)("div",{className:"shoppingCart-form-totalInfo-summary-top",children:[(0,a.jsx)("p",{className:"shoppingCart-form-totalInfo-summary-top-text",children:"Итого"}),(0,a.jsxs)("p",{className:"shoppingCart-form-totalInfo-summary-top-text",children:[N&&2===_?eW():eA()-eM()+eW()," ","₽"]})]}),(0,a.jsxs)("p",{className:"shoppingCart-form-totalInfo-summary-count",children:[f.items.reduce((e,t)=>e+(t.quantity||1),0)," ",(()=>{let e=f.items.reduce((e,t)=>e+(t.quantity||1),0);return 0===e?"Товары в корзине отсутствуют":1===e?"товар":e>1&&e<5?"товара":"товаров"})()]})]})]}),(0,a.jsx)("button",{type:"button",onClick:eH,className:"shoppingCart-form-makeOrderButton click-effect-block \n                    ".concat(k?"button-behind-modal":"","\n                    ").concat(S?"ios-button":"","\n                    "),disabled:D,children:(0,a.jsx)("p",{className:"shoppingCart-form-makeOrderButton-text",children:D?"Оформление заказа...":"Оплатить заказ"})}),ed&&!b&&(0,a.jsx)("div",{className:"shoppingCart-form-error",children:ed})]})]})]})]})});var X=r(9137),ee=r.n(X);r(7148),r(2022);let et=function(e){let{video:t}=e,r=(0,s.useRef)(null);return t.Video_URL?(0,a.jsxs)("div",{id:"Video-review",className:"video-review-block",children:[(0,a.jsx)("h3",{className:"video-review-title",children:"Видеообзор"}),(0,a.jsxs)("div",{className:"video-review-wrapper",onClick:()=>{let e=r.current;e&&(e.paused?e.play().catch(e=>{console.error("Video play failed:",e)}):e.pause())},children:[(0,a.jsx)("div",{className:"video-review-helper-block"}),(0,a.jsx)("video",{ref:r,src:t.Video_URL,poster:t.Poster_URL||"",controls:!0,playsInline:!0,preload:t.Poster_URL?"none":"auto",className:"video-review-content"})]})]}):null},er=function(e){let{text:t,title:r}=e,[i,l]=(0,s.useState)(!1),n=(0,s.useRef)(null);function c(){n.current&&(i?(l(!1),n.current.style.marginTop="0px",n.current.style.maxHeight="0px"):(l(!0),n.current.style.marginTop="15px",n.current.style.maxHeight="".concat(n.current.scrollHeight,"px")))}return(0,a.jsxs)("div",{className:"description-block ".concat(i?"description-block--open":""),children:[(0,a.jsxs)("div",{onClick:c,className:"description-header",children:[(0,a.jsx)("h3",{className:"description-title",children:r}),(0,a.jsx)("button",{onClick:c,className:"description-expand-button cursor-pointer",children:(0,a.jsx)("img",{src:"".concat(o,"dark-expand-icon.svg"),className:"description-expand-icon",alt:"Развернуть",onError:e=>{e.currentTarget.src="/placeholder-icon.svg"}})})]}),(0,a.jsx)("p",{ref:n,className:"description-text",children:t})]})},ea=(0,g.PA)(()=>{var e,t,r,n,c,d,p,h,g,v,x,j,N,y,b,k,T,A,P,D,M,O,F,B;let R=(0,i.g)();(0,l.useRouter)();let W=(0,i.Zp)();(0,i.zy)();let[H,q]=(0,s.useState)(null);(0,s.useEffect)(()=>{R.productId&&q(R.productId)},[R]),(0,s.useRef)(null),(0,s.useRef)(null);let[U,V]=(0,s.useState)({}),[J,z]=(0,s.useState)(!0),[Y,G]=(0,s.useState)(!1),[Q,Z]=(0,s.useState)([]),[K,$]=(0,s.useState)([]),[X,ea]=(0,s.useState)({}),[es,ei]=(0,s.useState)(null),[el,eo]=(0,s.useState)(null),[en,ec]=(0,s.useState)(0),[ed,ep]=(0,s.useState)("Размер"),[eu,em]=(0,s.useState)(!1),[eh,eg]=(0,s.useState)(!1),[ev,ef]=(0,s.useState)(!1),[ex,ej]=(0,s.useState)(!1),[e_,eC]=(0,s.useState)(null),[eN,ey]=(0,s.useState)(!1);function eb(e,t,r){ef(K.some(a=>{let s=(null==a?void 0:a.productId)===e,i=!t||(null==a?void 0:a.id)===t,l=!r||(null==a?void 0:a.colorId)===r;return s&&i&&l}))}return((0,s.useEffect)(()=>{if(Object.keys(X).length>0){let e=Object.values(X).reduce((e,t)=>!t||t.colorCode?e:e+((null==t?void 0:t.price)||0),0);X.Color&&X.Color.discount&&(e=Math.max(0,e-X.Color.discount)),ec(e)}else ec(0)},[X]),(0,s.useEffect)(()=>{if(Object.entries(U).length){var e;let t={};if(eo(null),ei(null),(null==(e=U.parameters)?void 0:e.length)>0){let e=U.parameters.find(e=>e.chosen)||U.parameters[0];e&&(t[e.name]={id:e.Parameter_ID,index:0,title:e.parameter_string,price:e.price||0,old_price:e.old_price||null},ep(e.name),Z([{id:e.Parameter_ID,index:0,title:e.parameter_string,price:e.price||0,old_price:e.old_price||null}]))}Object.keys(t).length>0&&ea(t)}},[U]),(0,s.useEffect)(()=>{let e=localStorage.getItem("addedSettingItems");if(e)try{$(JSON.parse(e))}catch(e){$([])}},[]),(0,s.useEffect)(()=>{K.length>0&&localStorage.setItem("addedSettingItems",JSON.stringify(K))},[K]),(0,s.useEffect)(()=>{if(Q.length>0&&(null==U?void 0:U.Product_ID)){let e=null==es?void 0:es.Color_ID;ef(K.some(t=>{var r;let a=(null==t?void 0:t.id)===(null==(r=Q[0])?void 0:r.id)&&(null==t?void 0:t.productId)===U.Product_ID,s=!e||(null==t?void 0:t.colorId)===e;return a&&(!e||s)}))}},[Q,null==U?void 0:U.Product_ID,K,es]),(0,s.useEffect)(()=>{var e,t;let r=(null==U||null==(e=U.parameters)?void 0:e.length)>0,a=(null==U||null==(t=U.colors)?void 0:t.length)>0,s=!0;r&&(Object.keys(X).some(e=>"Color"!==e)||(s=!1)),a&&!X.Color&&(s=!1),ej(s)},[U,X]),(0,s.useEffect)(()=>{z(!0);try{var e,t;let r=null==(t=u.data)||null==(e=t.products)?void 0:e.find(e=>(null==e?void 0:e.Product_ID)===Number(H));r?(G(!1),V(r),z(!1)):G(!0)}catch(e){G(!0)}},[H,u.data]),J)?(0,a.jsx)("main",{className:"main-container ".concat(m()?"main-container--ios":""),children:(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full min-h-[60vh]",children:(0,a.jsx)(E,{})})}):!Y&&(null==U?void 0:U.Product_ID)?(0,a.jsxs)("main",{className:"jsx-72d4dd2679668bbf "+"main-container ".concat(m()?"main-container--ios":""),children:[(0,a.jsx)(ee(),{id:"72d4dd2679668bbf",children:".swiper-pagination-bullet{width:8px!important;height:8px!important;opacity:.7!important;background:#999!important;margin:0 4px}.swiper-pagination-bullet-active{opacity:1!important;background:#333!important}.swiper-slide{display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;width:100%!important;opacity:1!important}.swiper-slide-content{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.product-image-item{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.swiper-pagination{bottom:10px!important;z-index:10!important}"}),(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf product-image-container",children:[(null==(e=U.marks)?void 0:e.length)>0&&(null==(t=U.marks[0])?void 0:t.Mark_Name)?(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf "+"product-tag ".concat(I(U.marks[0].Mark_Name)),children:S(U.marks[0].Mark_Name)}):null,(0,a.jsx)("button",{onClick:()=>w.toggleFavorite(U.Product_ID),className:"jsx-72d4dd2679668bbf product-favorite",children:(0,a.jsx)("svg",{width:"25",height:"25",viewBox:"0 0 18 16",fill:w.favoritesIds.some(e=>e===U.Product_ID)?"#FE646F":"transparent",xmlns:"http://www.w3.org/2000/svg",className:"jsx-72d4dd2679668bbf cursor-pointer",children:(0,a.jsx)("path",{d:"M9.30663 14.7267L9.30662 14.7267L9.30029 14.7289C9.24983 14.7467 9.14099 14.7668 8.99996 14.7668C8.85893 14.7668 8.75009 14.7467 8.69963 14.7289L8.69964 14.7289L8.69329 14.7267C7.57825 14.346 5.71238 13.3333 4.13388 11.716C2.56322 10.1067 1.31663 7.94228 1.31663 5.24183C1.31663 3.02277 3.10364 1.2335 5.29996 1.2335C6.60123 1.2335 7.75317 1.86153 8.47812 2.8377C8.60075 3.00282 8.79429 3.10016 8.99996 3.10016C9.20563 3.10016 9.39917 3.00282 9.5218 2.8377C10.2464 1.86206 11.4064 1.2335 12.7 1.2335C14.8963 1.2335 16.6833 3.02277 16.6833 5.24183C16.6833 7.94228 15.4367 10.1067 13.866 11.716C12.2875 13.3333 10.4217 14.346 9.30663 14.7267Z",stroke:w.favoritesIds.some(e=>e===U.Product_ID)?"#FE646F":"#6C6C6C",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-72d4dd2679668bbf"})})}),el?(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf product-image",children:(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:el,alt:"Изображение товара ".concat(U.Product_Name||"Товар"),onError:e=>{e.currentTarget.src="/placeholder-image.jpg",eo(null)},className:"jsx-72d4dd2679668bbf product-image-item"})})}):(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf product-image",children:(()=>{try{let e=JSON.parse(JSON.stringify(U)),t=[...e.images||[]];if(e.parameters&&e.parameters.forEach(r=>{r.extra_field_image&&t.push({Image_ID:"param-".concat(r.Parameter_ID),Image_URL:r.extra_field_image,MainImage:!1,Product_ID:e.Product_ID,from_parameter:!0,parameter_name:r.parameter_string})}),0===t.length)return(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:"/placeholder-image.jpg",alt:"Изображение товара отсутствует",className:"jsx-72d4dd2679668bbf product-image-item"})});if(1===t.length)return(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:t[0].Image_URL,alt:"Изображение товара ".concat(e.Product_Name||"Товар"),onError:e=>{e.currentTarget.src="/placeholder-image.jpg"},className:"jsx-72d4dd2679668bbf product-image-item"})});return(0,a.jsx)(C.RC,{modules:[_.dK],spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},className:"product-slider",onInit:e=>{setTimeout(()=>e.update(),100)},children:t.map((t,r)=>(0,a.jsx)(C.qr,{children:(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:t.Image_URL,alt:"Изображение товара ".concat(e.Product_Name||"Товар"," ").concat(t.from_parameter?"(".concat(t.parameter_name,")"):""),onError:e=>{e.currentTarget.src="/placeholder-image.jpg"},className:"jsx-72d4dd2679668bbf product-image-item"})})},"slide-".concat(r,"-").concat(t.Image_ID||Math.random())))})}catch(e){return(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:"/placeholder-image.jpg",alt:"Ошибка загрузки изображений",className:"jsx-72d4dd2679668bbf product-image-item"})})}})()})]}),(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf product-details",children:[(0,a.jsx)("h1",{className:"jsx-72d4dd2679668bbf product-title",children:U.Product_Name||"Неизвестный товар"}),(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf price-container",children:[(0,a.jsxs)("p",{className:"jsx-72d4dd2679668bbf current-price",children:[en||0," ₽"]}),(null==es?void 0:es.discount)>0&&(0,a.jsxs)("p",{className:"jsx-72d4dd2679668bbf old-price",children:[en+es.discount," ₽"]})]}),(null==(r=U.parameters)?void 0:r.length)>1&&(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf parameters-section",children:[(0,a.jsx)("h3",{className:"jsx-72d4dd2679668bbf parameters-title",children:ed}),(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf parameters-content",children:(0,a.jsx)(L,{height:"38px",between:"5px",children:U.parameters.slice().sort((e,t)=>e.Parameter_ID-t.Parameter_ID).map(e=>{var t;let r=(null==(t=X[e.name])?void 0:t.id)===e.Parameter_ID;return(0,a.jsx)("div",{onClick:()=>(function(e,t){var r;if(!e)return;if("цвет"===t.toLowerCase()&&!(null==(r=U.colors)?void 0:r.length)){let t=U.parameters.find(t=>t.Parameter_ID===e.id);(null==t?void 0:t.extra_field_image)&&eo(t.extra_field_image)}let a={Color:X.Color};a[t]=e,ep(t),ea(a),Z([e]),eb(U.Product_ID,null==e?void 0:e.id,null==es?void 0:es.Color_ID)})({id:e.Parameter_ID,index:0,title:e.parameter_string,price:e.price||0,old_price:e.old_price},e.name),className:"jsx-72d4dd2679668bbf "+"parameters-item ".concat(r?"parameters-item--active":""),children:(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf parameters-text",children:e.parameter_string||"Без названия"})},"param-".concat(e.Parameter_ID||Math.random()))})})})]}),(null==(n=U.colors)?void 0:n.length)>0&&(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf color-section",children:[(0,a.jsx)("h3",{className:"jsx-72d4dd2679668bbf parameters-title",children:"Цвет"}),(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf color-options",children:(0,a.jsx)(L,{height:"42px",between:"5px",children:U.colors.slice().sort((e,t)=>e.Color_ID-t.Color_ID).map(e=>(0,a.jsxs)("div",{onClick:()=>(function(e){if(!e)return;if(es===e){ei(null),eo(null);return}ei(e),e.Color_image?eo(e.Color_image):eo(null);let t={...X};t.Color={id:e.Color_ID,title:e.Color_Name,colorCode:e.Color_Code,colorImage:e.Color_image,discount:e.discount||0},ea(t);let r=Q[0];eb(U.Product_ID,null==r?void 0:r.id,e.Color_ID)})(e),className:"jsx-72d4dd2679668bbf "+"color-option ".concat((null==es?void 0:es.Color_ID)===e.Color_ID?"color-option--active":""),children:[(0,a.jsx)("div",{style:{backgroundColor:e.Color_Code||"#ccc"},className:"jsx-72d4dd2679668bbf color-circle"}),(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf color-name",children:e.Color_Name})]},"color-".concat(e.Color_ID||Math.random())))})})]}),(null==(c=U.reviews_video)?void 0:c.length)>0&&(null==(d=U.reviews_video[0])?void 0:d.Video_URL)&&(0,a.jsxs)("button",{onClick:function(){let e=document.getElementById("Video-review");e&&e.scrollIntoView({behavior:"smooth"})},className:"jsx-72d4dd2679668bbf video-button",children:[(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf video-button-content",children:[(0,a.jsx)("img",{src:"".concat(o,"video-link-icon.svg"),alt:"Видео",onError:e=>{e.currentTarget.src="/placeholder-icon.svg"},className:"jsx-72d4dd2679668bbf"}),(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf video-button-text",children:"Смотреть видео-обзор"})]}),(0,a.jsx)("img",{src:"".concat(o,"dark-expand-icon.svg"),alt:"Смотерть",onError:e=>{e.currentTarget.src="/placeholder-icon.svg"},className:"jsx-72d4dd2679668bbf expand-icon"})]}),(null==(p=U.extras)?void 0:p.length)>0&&(0,a.jsxs)(a.Fragment,{children:[console.log(JSON.parse(JSON.stringify(U.extras[0]))),(null==(h=U.extras[0])?void 0:h.Characteristics)&&(0,a.jsx)(er,{text:U.extras[0].Characteristics,title:(null==(v=u.data)||null==(g=v.special_project_parameters)?void 0:g.product_page_accordeon_item_header_12_value)||"Характеристики"}),(null==(x=U.extras[0])?void 0:x.Kit)&&(0,a.jsx)(er,{text:U.extras[0].Kit,title:(null==(N=u.data)||null==(j=N.special_project_parameters)?void 0:j.product_page_accordeon_item_header_12_description)||"Описание"}),(null==(y=U.extras[0])?void 0:y.Offer)&&(0,a.jsx)(er,{text:U.extras[0].Offer,title:(null==(k=u.data)||null==(b=k.special_project_parameters)?void 0:b.product_page_accordeon_item_header_34_value)||"Рекомендации"}),(null==(T=U.extras[0])?void 0:T.Delivery)&&(0,a.jsx)(er,{text:U.extras[0].Delivery,title:(null==(P=u.data)||null==(A=P.special_project_parameters)?void 0:A.product_page_accordeon_item_header_34_description)||"Параметры"})]}),(null==(M=u.data)||null==(D=M.special_project_parameters_badges)?void 0:D.length)>0&&(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf info-cards ",children:(0,a.jsx)(L,{height:"100%",children:u.data.special_project_parameters_badges.slice(0,Math.min(4,u.data.special_project_parameters_badges.length)).map((e,t)=>(0,a.jsxs)("div",{onClick:()=>(function(e){let t=window.Telegram.WebApp;t?t.openLink(e,{try_instant_view:!0}):window.open(e,"_blank")})(e.url||"#"),className:"jsx-72d4dd2679668bbf info-card click-effect-block",children:[(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf info-text",children:e.description}),(0,a.jsx)("img",{src:e.image_url,alt:e.description,onError:e=>{e.currentTarget.src="/placeholder-icon.svg"},className:"jsx-72d4dd2679668bbf info-icon"})]},e.id||t))})}),(null==(O=U.reviews)?void 0:O.length)>0&&(0,a.jsxs)("div",{className:"jsx-72d4dd2679668bbf reviews-block",children:[(0,a.jsx)("h3",{className:"jsx-72d4dd2679668bbf reviews-title",children:"Отзывы"}),(0,a.jsx)(C.RC,{modules:[_.dK],spaceBetween:10,slidesPerView:1,pagination:{clickable:!0},className:"reviews-content",style:{width:"100%",height:"100%"},children:U.reviews.map(e=>(0,a.jsx)(C.qr,{children:(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf swiper-slide-content",children:(0,a.jsx)("img",{src:e.Photo_URL||"/placeholder-review.jpg",alt:"Отзыв пользователя",onError:e=>{e.currentTarget.src="/placeholder-review.jpg"},className:"jsx-72d4dd2679668bbf"})})},e.Photo_ID||Math.random()))}),(0,a.jsx)("button",{onClick:function(){var e,t;let r=null==(t=u.data)||null==(e=t.special_project_parameters)?void 0:e.reviews_link_value;r&&window.open(r,"_blank")},className:"jsx-72d4dd2679668bbf view-all-button",children:(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf view-all-text",children:"Смотреть все отзывы"})})]}),(null==(F=U.reviews_video)?void 0:F.length)>0&&(0,a.jsx)(et,{video:U.reviews_video[0]}),(0,a.jsx)("button",{onClick:()=>{var e;ex&&(!((null==(e=U.colors)?void 0:e.length)>0)||es)||ev?function(){var e,t;if(!(null==U?void 0:U.Product_ID))return;if(ev){window.location.hash="#/shoppingcart",setTimeout(()=>{W("/shoppingcart")},100);return}let r=(null==(e=U.parameters)?void 0:e.length)>0,a=(null==(t=U.colors)?void 0:t.length)>0,s=null;for(let e in X)if("Color"!==e&&X[e]){s=X[e];break}let i=X.Color;if(a&&!i){eC("Пожалуйста, выберите цвет товара"),setTimeout(()=>{eC(null)},3e3);return}if(r&&!s){eC("Пожалуйста, выберите параметр товара"),setTimeout(()=>{eC(null)},3e3);return}let l={paramId:null==s?void 0:s.id,paramTitle:null==s?void 0:s.title,colorId:null==i?void 0:i.id,colorName:null==i?void 0:i.title,colorCode:null==i?void 0:i.colorCode,colorImage:null==i?void 0:i.colorImage,discount:(null==i?void 0:i.discount)||0};f.addToCart(U.Product_ID,l);let o={id:(null==s?void 0:s.id)||null,productId:U.Product_ID,title:(null==s?void 0:s.title)||null,colorId:null==i?void 0:i.id,colorName:null==i?void 0:i.title,colorImage:null==i?void 0:i.colorImage};$([...K,o]),localStorage.setItem("addedSettingItems",JSON.stringify([...K,o])),ef(!0)}():function(){var e;(null==(e=U.colors)?void 0:e.length)>0&&!es&&(ey(!0),setTimeout(()=>{ey(!1)},3e3))}()},className:"jsx-72d4dd2679668bbf "+"add-to-cart-button\n            ".concat(ev?"add-to-cart-button--added":"","\n            ").concat(!ex||(null==(B=U.colors)?void 0:B.length)>0&&!es?ev?"":"add-to-cart-button--disabled":"click-effect-block","\n            ").concat(m()?"add-to-cart-button--ios":""),children:(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf add-to-cart-text",children:ev?"В корзину":"Добавить в корзину"})})]}),e_&&(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf error-popup",children:(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf",children:e_})}),eN&&(0,a.jsx)("div",{className:"jsx-72d4dd2679668bbf color-required-popup",children:(0,a.jsx)("p",{className:"jsx-72d4dd2679668bbf",children:"Пожалуйста, выберите цвет товара"})})]}):(0,a.jsx)("main",{className:"main-container ".concat(m()?"main-container--ios":""),children:(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full min-h-[60vh]",children:(0,a.jsx)("p",{className:"text-xl",children:"Произошла ошибка при загрузке товара или товар не найден."})})})});r(6803);let es=e=>{let{children:t}=e,r=(0,i.zy)();return(0,s.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[r.pathname]),t||null};function ei(){let[e,t]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t(!0)},[]),e)?(0,a.jsx)(i.I9,{children:(0,a.jsx)(es,{children:(0,a.jsx)(j,{children:(0,a.jsxs)(i.BV,{children:[(0,a.jsx)(i.qh,{path:"/",element:(0,a.jsx)(M,{})}),(0,a.jsx)(i.qh,{path:"/catalog",element:(0,a.jsx)(U,{})}),(0,a.jsx)(i.qh,{path:"/favorites",element:(0,a.jsx)(V,{})}),(0,a.jsx)(i.qh,{path:"/shoppingcart",element:(0,a.jsx)($,{})}),(0,a.jsx)(i.qh,{path:"/product/:productId",element:(0,a.jsx)(ea,{})}),(0,a.jsx)(i.qh,{path:"*",element:(0,a.jsx)(i.C5,{to:"/",replace:!0})})]})})})}):(0,a.jsx)("main",{children:(0,a.jsx)(E,{})})}},4631:()=>{},6153:()=>{},6803:()=>{},6853:()=>{},7123:()=>{},7148:()=>{},7576:()=>{},8274:()=>{},8358:()=>{},8548:()=>{},8720:()=>{},9653:(e,t,r)=>{Promise.resolve().then(r.bind(r,4459))},9894:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[86,327,866,264,441,684,358],()=>t(9653)),_N_E=e.O()}]);